ms_memberOrgs={};ms_memberOrgs.getEnv=function(d){var f="";var i=/^(\w*)(prexg)(\w*)(.cnsuning.com)$/,g=/^(\w*)(xgpre)(\w*)(.cnsuning.com)$/,a=/^(\w*)(pre)(\w*)(.cnsuning.com)$/,h=/^(\w*)(sit)(\w*)(.cnsuning.com)$/,c=/^(\w*)(dev)(\w*)(.cnsuning.com)$/,b=window.location.hostname;var e="prd";if(i.test(b)||g.test(b)){e="prexg"}else{if(a.test(b)){e="pre"}else{if(h.test(b)){e="sit"}else{if(c.test(b)){e="dev"}}}}switch(e){case"prd":switch(d){case"msiDomain":f="my.suning.com";break;case"msiApiDomain":f="myapi.suning.com";break}break;case"prexg":switch(d){case"msiDomain":f="myprexg.cnsuning.com";break;case"msiApiDomain":f="myprexg.cnsuning.com";break}break;case"pre":switch(d){case"msiDomain":f="mypre.cnsuning.com";break;case"msiApiDomain":f="mypre.cnsuning.com";break}break;case"sit":switch(d){case"msiDomain":f="mysit.cnsuning.com/msi-web";break;case"msiApiDomain":f="mysit.cnsuning.com/msi-web";break}break;case"dev":switch(d){case"msiDomain":f="mydev.cnsuning.com:8080/msi-web";break;case"msiApiDomain":f="mydev.cnsuning.com:8080/msi-web";break}break}return f};ms_memberOrgs.getCookie=function(c){var d;return(d=document.cookie.match(RegExp("(^| )"+c+"=([^;]*)(;|$)")))?decodeURIComponent(d[2].replace(/\+/g,"%20")):null};ms_memberOrgs.setCookie=function(b,e,c,h){var d=false;if(!!window.ActiveXObject||"ActiveXObject" in window){d=true}else{d=false}if(d){if(e){if(h){var g=new Date();g.setTime(g.getTime()+(h*1000*60));var a="; expires="+g.toGMTString()}else{var a="; expires=At the end of the Session"}var f="";if(c!=null){f="; path="+c}document.cookie=b+"="+escape(e)+a+f}}else{if(e){if(h){var g=new Date();g.setTime(g.getTime()+(h*1000*60));var a="; expires="+g.toGMTString()}else{var a="; expires=Session"}var f="";if(c!=null){f="; path="+c}document.cookie=b+"="+escape(e)+a+f}}};ms_memberOrgs.setCookieWithDomain=function(a,g,f,c,h){var d=false;if(!!window.ActiveXObject||"ActiveXObject" in window){d=true}else{d=false}if(d){if(g){if(c){var e=new Date();e.setTime(e.getTime()+(c*1000*60));var b="; expires="+e.toGMTString()}else{var b="; expires=At the end of the Session"}var i="";if(f!=null){i="; path="+f}if(h){i="; domain="+h}document.cookie=a+"="+escape(g)+b+i}}else{if(g){if(c){var e=new Date();e.setTime(e.getTime()+(c*1000*60));var b="; expires="+e.toGMTString()}else{var b="; expires=Session"}var i="";if(f!=null){i=i+"; path="+f}if(h){i=i+"; domain="+h}document.cookie=a+"="+escape(g)+b+i}}};ms_memberOrgs.queryMemberOrgsInfo=function(b,e){var a={status:"failure",code:"",msg:""};var d="_memberOrgIds";var c=ms_memberOrgs.getEnv("msiApiDomain");if(typeof e=="undefined"){if(typeof passport_config!="undefined"){e=passport_config}else{e={base:"//"+c+"/",loginTheme:"b2c_pop"}}}probeAuthStatus(function(m){var h=ms_memberOrgs.getCookie(d);if(h){try{var k=h.split("|");if(m==k[2]){a.status=k[0];a.code=k[1];if(k[3]){a.result=new Object();a.result.orgIds=[];a.result.custNum=m;var j=k[3].split(",");for(var g in j){var i=new Object();i.orgId=j[g];a.result.orgIds[g]=i}}b(a);return}ms_memberOrgs.setCookie(d,"failure","/",-1)}catch(l){}}var n="https:"==document.location.protocol?"https":"http";var f=n+"://"+c+"/api/person/getPersonOrgInfo-"+m+"-getMemberOrgsCallBack.htm";$.ajax({url:f,type:"GET",dataType:"jsonp",timeout:5000,cache:true,jsonpCallback:"getMemberOrgsCallBack",success:function(r){try{a=r;if(r.status=="success"){var q="success|"+r.code+"|"+m+"|";var p=r.result;if(p){var o=p.orgIds;for(var t in o){q+=o[t].orgId+","}q=q.substring(0,q.length-1)}ms_memberOrgs.setCookie(d,q,"/")}b(a)}catch(s){b(a)}},error:function(o){b(a)}})},function(){a.code="NOT_LOGIN";a.msg="未登录";b(a)},e)};ms_memberOrgs.queryIsEnterprise=function(b,d){var a={status:"failure",code:"",msg:""};var e="_memberIsEn";var c=ms_memberOrgs.getEnv("msiApiDomain");if(typeof d=="undefined"){if(typeof passport_config!="undefined"){d=passport_config}else{d={base:"//"+c+"/",loginTheme:"b2c_pop"}}}probeAuthStatus(function(j){var k=ms_memberOrgs.getCookie(e);if(k){try{var f=k.split("|");if(j==f[1]){a.status=f[0];a.code=f[2];b(a);return}}catch(i){}}var g="https:"==document.location.protocol?"https":"http";var h=g+"://"+c+"/api/person/isEnterpriseMember-"+j+"-getIsEnCallBack.htm";$.ajax({url:h,type:"GET",dataType:"jsonp",timeout:5000,cache:false,jsonpCallback:"getIsEnCallBack",success:function(o){a=o;if(o.status=="success"){var m=o.code;var p=o.msg;var n="success|"+j+"|"+m;var l=2*60;ms_memberOrgs.setCookie(e,n,"/",l)}b(a)},error:function(l){b(a)}})},function(){a.code="NOT_LOGIN";a.msg="未登录";b(a)},d)};ms_memberOrgs.queryIdentityStatus=function(b,d){var a={status:"failure",code:"",msg:""};var e="_memberIdSt";var c=ms_memberOrgs.getEnv("msiApiDomain");if(typeof d=="undefined"){if(typeof passport_config!="undefined"){d=passport_config}else{d={base:"//"+c+"/",loginTheme:"b2c_pop"}}}probeAuthStatus(function(j){var k=ms_memberOrgs.getCookie(e);if(k){try{var f=k.split("|");if(j==f[1]){a.status=f[0];a.code="";a.msg="";a.result=new Object();a.result.custNum=j;a.result.idstCode=f[2];a.result.idstDesc=f[3];b(a);return}ms_memberOrgs.setCookie(e,"failure","/",-1)}catch(i){}}var g="https:"==document.location.protocol?"https":"http";var h=g+"://"+c+"/api/person/getIdenStat-"+j+"-getIdStCallBack.htm";$.ajax({url:h,type:"GET",dataType:"jsonp",timeout:5000,cache:false,jsonpCallback:"getIdStCallBack",success:function(n){try{a=n;if(n.status=="success"){var p=a.result.idstDesc;var m="success|"+j+"|"+idstCode+"|"+p;var l=2*60;if("233000000030"==idstCode){l=30*24*60}ms_memberOrgs.setCookie(e,m,"/",l)}b(a)}catch(o){b(a)}},error:function(l){b(a)}})},function(){a.code="NOT_LOGIN";a.msg="未登录";b(a)},d)};ms_memberOrgs.queryMemberStatusInfo=function(c,f,b){var a={status:"failure",code:"",msg:""};var g="_memberStInfo";var e=ms_memberOrgs.getEnv("msiApiDomain");if(typeof f=="undefined"){if(typeof passport_config!="undefined"){f=passport_config}else{f={base:"//"+e+"/",loginTheme:"b2c_pop"}}}var d=".suning.com";probeAuthStatus(function(r){var k=ms_memberOrgs.getCookie(g);if(k){try{var n=k.split("|");if(r==n[1]){a.status=n[0];a.code="";a.msg="";a.result=new Object();a.resultObj=new Object();a.result.custNum=r;var u=n[2];a.result.custType=u;if("person"==u){a.result.eppAuthStat=n[3];a.result.paidFlag=n[4];a.result.levelNum=n[5];if(n.length>6){var q=new Array();for(var m=6;m<n.length;m++){if(n[m]){var p=n[m].split(",")||[];if(p.length>=3){var s=new Object();s.levelType=p[0];s.paidFlag=p[1];var j=p[2];if(j&&j!="undefined"){s.paidType=j}var l=p[3];if(l&&l!="undefined"){s.levelNum=l}q.push(s)}}}a.resultObj.custLevelInfoDtoList=q}}else{if("company"==u){a.result.idstCode=n[3]}}c(a);return}ms_memberOrgs.setCookieWithDomain(g,"failure","/",-1,d)}catch(o){}}var t="https:"==document.location.protocol?"https":"http";var h=t+"://"+e+"/api/person/getMemberStatusInfo-"+r+"-getMemberStatusInfoCallBack.do";if(b){h=h+"?levelTypes="+b}$.ajax({url:h,type:"GET",dataType:"jsonp",timeout:5000,cache:true,jsonpCallback:"getMemberStatusInfoCallBack",success:function(D){a=D;a.result.custNum=r;try{if(D.status=="success"){var K=a.result.custType;if("person"==K){var x=a.result.eppAuthStat;var v=a.result.paidFlag;var I="success|"+r+"|"+K+"|"+x+"|"+v;var B=a.resultObj;var H;if(B){H=B.custLevelInfoDtoList||[]}if(H&&H.length>0){for(var E=0;E<H.length;E++){var G=H[E];var A=G.levelType;var C=G.paidFlag;var w=G.paidType;var z=G.levelNum;I=I+"|"+A+","+C+","+w+","+z}}var J=2*60;if("233000000030"==y){J=30*24*60}ms_memberOrgs.setCookieWithDomain(g,I,"/",J,d)}else{if("company"==K){var y=a.result.idstCode;var I="success|"+r+"|"+K+"|"+y;var J=2*60;if("233000000030"==y){J=30*24*60}ms_memberOrgs.setCookieWithDomain(g,I,"/",J,d)}}}c(a)}catch(F){c(a)}},error:function(i){c(a)}})},function(){a.code="NOT_LOGIN";a.msg="未登录";c(a)},f)};var sa=sa||{};sa.openAPI=sa.openAPI||{};var version;var receiveParamObj=receiveParamObj||{hasInitSiller:false};var coupon=coupon||{};coupon.receive=(function($){var receiveCoupon=function(paramObj,callback){receiveParamObj.actId=paramObj.actId;receiveParamObj.actKey=paramObj.actKey;receiveParamObj.cityId=paramObj.cityId;receiveParamObj.sourceId=paramObj.sourceId;receiveParamObj.bonusTrigerId=paramObj.bonusTrigerId==undefined?"":paramObj.bonusTrigerId;receiveParamObj.callback=callback;coupon.receive.receiveCouponAjax(paramObj,callback,true)};var receiveCouponV2=function(paramObj,callback){receiveParamObj.actId=paramObj.actId;coupon.receive.receiveCouponAjax(paramObj,callback,false)};var receiveCouponAjax=function(paramObj,callback,needAlert){if(typeof(callback)!="function"){alert("未传入参数：回调函数callback！");return}if(!receiveParamObj.hasInitSiller){coupon.sillerCode.initSillerCode();receiveParamObj.hasInitSiller=true}var targetUrl="//quan.suning.com/lqzx_rsf.do?callback=?";paramObj.detect=encodeURIComponent(bd.rst());paramObj.deviceToken=bd.ptoken();paramObj.channel="1";paramObj.dfpToken=receiveParamObj.cpfdfptoken;ensureLogin(function(){$.ajax({url:targetUrl,type:"get",timeout:3000,dataType:"jsonp",cache:false,jsonpCallback:"callback",data:paramObj,success:function(data){if(needAlert){couponSuccessCallBack(data,callback)}else{couponSuccessCallBackV2(data,callback)}},error:function(data){if(needAlert){couponFailCallBack(callback)}else{couponFailCallBackV2(callback)}}})},coupon.common.passport_config)};var couponSuccessCallBack=function(respData,callerCallBack){if(respData.resultCode=="0"){callerCallBack(respData);resultAlert("领券成功","恭喜您，领券成功！")}else{if(respData.resultCode=="1001"||respData.resultCode=="1002"){coupon.sillerCode.sillerAlertBox(respData)}else{if(respData.resultCode=="1003"||respData.resultCode=="1004"){coupon.imageCode.imageAlertBox(respData)}else{if(respData.resultCode=="2004"||respData.resultCode=="2005"||respData.resultCode=="2006"){coupon.sms.smsAlertBox(respData)}else{resultAlert("领券失败",respData.resultMsg);callerCallBack(respData)}}}coupon.analytics.sendSAErrorMessage("coupon_receive_api_pc",respData.resultCode+"&&1&&"+respData.resultMsg+"&&");coupon.analytics.sendUomErrorMsg("2","cpf-api-20001_"+respData.resultCode,"0",respData.resultMsg,receiveParamObj.actId)}if("1"==respData.dfpTokenFlag){coupon.init.dfpTokenInit()}};var couponFailCallBack=function(callerCallBack){var respData={};respData.resultCode="C0000";respData.resultMsg="当前网络异常，请稍后再试（C0000）";coupon.analytics.sendSAErrorMessage("coupon_receive_api_pc","&&0&&当前网络异常，请稍后再试（C0000）&&");callerCallBack(respData)};var couponSuccessCallBackV2=function(respData,callerCallBack){coupon.analytics.sendSAErrorMessage("coupon_receive_api_pc","&&1&&"+respData.resultMsg+"&&");coupon.analytics.sendUomErrorMsg("2","cpf-api-20001_"+respData.resultCode,"0",respData.resultMsg,receiveParamObj.actId);callerCallBack(respData);if("1"==respData.dfpTokenFlag){coupon.init.dfpTokenInit()}};var couponFailCallBackV2=function(callerCallBack){var respData={};respData.resultCode="C0000";respData.resultMsg="当前网络异常，请稍后再试（C0000）";coupon.analytics.sendSAErrorMessage("coupon_receive_api_pc","&&0&&当前网络异常，请稍后再试（C0000）&&");callerCallBack(respData)};var resultAlert=function(title,message){var alertHtml='<div class="coupon-use">  <div class="quanUse-error">    <div class="bindCoupon-box quanUseDilog">      <div class="bindCoupon-title">        <a href="javascript:void(0)" class="close" title="&#x5173;&#x95ED;"></a>        <strong>'+title+'</strong>      </div>      <div class="bindCoupon-content-success">        <p><span></span><em id="alertMsg">'+message+'</em></p>        <div class="bindCoupon-success-btn">          <a href="javascript:void(0)" class="close">关闭</a>        </div>      </div>    </div>  </div></div>';$.mDialog({css:{width:"448px",height:"250px"},title:"",message:alertHtml,fadeIn:300,fadeOut:0,callback:function(){$(".m-dialog .title, .m-dialog .btn").remove()}})};return{receiveCoupon:receiveCoupon,receiveCouponV2:receiveCouponV2,receiveCouponAjax:receiveCouponAjax}})(jQuery);coupon.imageCode=(function($){var uuid="";var sceneId="";var imageAlertBox=function(respData){uuid=respData.uuid;sceneId=respData.sceneId;var vcsImgsrc="//vcs.suning.com/vcs/imageCode.htm?uuid="+uuid+"&yys="+new Date().getTime()+"&sceneId="+sceneId;$("#imgCode").attr("src",vcsImgsrc);$("#imageCodeDiv").show();$("#sillerCodeDivPcApi").hide();$("#inputCode").removeClass("error-input");$("#inputCode").val("");$("#tipCode").removeClass("tip-icon tip-ok-16 tip-ok l");$("#tipCode").hide();$(".siller-confirm").off("click").on("click",function(){coupon.imageCode.validateCode(1)});$("#failMsg").html(respData.resultMsg);$(".dialog-siller,.dialog-siller-fiexd").show()};var validateCode=function(flag){var code=$("#inputCode").val();code=code.replace(/\s+/g,"");if(code==""||code==undefined){$("#tipCode").hide();$("#inputCode").addClass("error-input");$("#inputCode").val("");$("#inputCode").attr("placeholder","请输入正确的验证码");coupon.imageCode.changeCode();return}var param="code="+code+"&uuid="+uuid+"&delFlag=0";$.ajax({type:"get",url:"//vcs.suning.com/vcs/validate_jsonp.htm",data:param,dataType:"jsonp",success:function(data){if(data[0].result=="true"){$("#tipCode").addClass("tip-icon tip-ok-16 tip-ok l");$("#tipCode").show();$("#inputCode").removeClass("error-input");if(flag=="1"){$(".checkout").removeClass("checkout-loading");$(".checkout").trigger("click");coupon.init.closeValidateAlert();var paramObj={actId:receiveParamObj.actId,actKey:receiveParamObj.actKey,cityId:receiveParamObj.cityId,validateCode:code,uuid:uuid,sourceId:receiveParamObj.sourceId,bonusTrigerId:receiveParamObj.bonusTrigerId};coupon.receive.receiveCouponAjax(paramObj,receiveParamObj.callback,true)}}else{$("#tipCode").hide();$("#inputCode").addClass("error-input");$("#inputCode").val("");$("#inputCode").attr("placeholder","请输入正确的验证码");coupon.imageCode.changeCode()}}})};var changeCode=function(){var src="//vcs.suning.com/vcs/imageCode.htm?uuid="+uuid+"&yys="+new Date().getTime()+"&sceneId="+sceneId;$("#imgCode").attr("src",src)};var keyupFunc=function(){var code=$("#inputCode").val();code=code.replace(/\s+/g,"");var length=code.length;if(length>=4){coupon.imageCode.validateCode(0)}};var focusFunc=function(){$("#inputCode").removeClass("error-input");$("#inputCode").attr("placeholder","以下字符不区分大小写")};return{imageAlertBox:imageAlertBox,changeCode:changeCode,keyupFunc:keyupFunc,focusFunc:focusFunc,validateCode:validateCode}})(jQuery);coupon.sillerCode=(function($){var sillerAlertBox=function(respData){siller.reset();$("#imageCodeDiv").hide();$("#sillerCodeDivPcApi").show();$(".siller-confirm").off("click").on("click",function(){coupon.sillerCode.receiveCouponAgain()});$("#failMsg").html(respData.resultMsg);$(".dialog-siller,.dialog-siller-fiexd").show()};var initSillerCode=function(){siller.init({tip1:"滑动完成",backWidth:"300px",backHeight:"36px",slWidth:"36px",slHeight:"36px",fontSize:"12px",target:"sillerCodeDivPcApi",url:"//dt.suning.com/detect/dt/dragDetect.json"});$("#sillerCodeDivPcApi").find("div").css({height:"42px"});siller.show()};var receiveCouponAgain=function(){if(siller.status==1){coupon.init.closeValidateAlert();var paramObj={actId:receiveParamObj.actId,actKey:receiveParamObj.actKey,cityId:receiveParamObj.cityId,validateCode:siller.queryToken(),sourceId:receiveParamObj.sourceId,bonusTrigerId:receiveParamObj.bonusTrigerId};coupon.receive.receiveCouponAjax(paramObj,receiveParamObj.callback,true)}};return{sillerAlertBox:sillerAlertBox,receiveCouponAgain:receiveCouponAgain,initSillerCode:initSillerCode}})(jQuery);coupon.sms=(function($){var count=function(count){$(".again i").text(count);if(count>=0){setTimeout(function(){coupon.sms.count(--count)},1000)}else{$(".get-sms").show();$(".again").hide()}};var sendSmsCode=function(){var targetUrl="//quan.suning.com/sms/getSmsCode.do?callback=?";$.ajax({url:targetUrl,type:"get",timeout:3000,dataType:"jsonp",cache:false,jsonpCallback:"callback",success:function(data){sendSmsSuccessCallBack(data)},error:function(data){sendSmsFailCallBack()}})};var sendSmsSuccessCallBack=function(data){if("1001"==data.errcode){$(".get-sms").hide();$(".again").show();coupon.sms.count(60);$(".error span").hide()}else{if(data.errcode=="01001"){$(".get-sms").hide();$(".has-none").show();$(".error span").hide();coupon.analytics.sendUomErrorMsg("2","cpf-api-20018_"+data.errcode,"0","今日次数已用完","")}else{if(data.errcode=="1104"||data.errcode=="1106"){$(".error span").text("验证码发送失败，请重新获取");$(".error span").show();coupon.analytics.sendUomErrorMsg("2","cpf-api-20018_"+data.errcode,"0","验证码发送失败，请重新获取","")}else{if(data.errcode=="01002"){$(".error span").text("您的操作过于频繁，请1分钟后再试");$(".error span").show();coupon.analytics.sendUomErrorMsg("2","cpf-api-20018_"+data.errcode,"0","您的操作过于频繁，请1分钟后再试","")}}}}};var sendSmsFailCallBack=function(){};var smsAlertBox=function(respData){var alertHtml='<div class="sms">	<div class="sms-content">   	<div class="sms-title">			<a href="javascript:void(0)" class="close" title="&#x5173;&#x95ED;"></a>			<strong>活动过于火爆，请进行短信安全验证</strong>		</div>		<div class="sms-con">		<p id="smsPhoneNo">'+respData.mobileNum+'</p>		<div class="sms-input">			<input type="text" placeholder="&#x8BF7;&#x8F93;&#x5165;&#x9A8C;&#x8BC1;&#x7801;">			<a class="get-sms" href="javascript:void(0)">获取验证码</a>			<a style="display: none;" class="again" href="javascript:void(0)">重新获取(<i>60</i>)</a>			<a style="display: none;" class="has-none" href="javascript:void(0)">今日次数用完</a>		</div>		<p class="error">';if(respData.resultCode=="2005"){alertHtml+="			<span>验证码错误</span>"}else{if(respData.resultCode=="2006"){alertHtml+="			<span>验证码错误次数过多，请重新获取</span>"}else{alertHtml+='			<span style="display: none;">验证码错误</span>'}}alertHtml+='		</p>		<div class="sms-btn">		<a class="sms-submit" href="javascript:void(0)">确定</a>		<a class="close" href="javascript:void(0)">取消</a>	</div></div>';$.mDialog({css:{width:"448px",height:"250px"},title:"",message:alertHtml,fadeIn:300,fadeOut:0,callback:function(){$(".m-dialog .title, .m-dialog .btn").remove();$(".again,.has-none").hide();$(".get-sms").off("click").on("click",function(){sendSmsCode()});$(".sms-input input").off("focus").on("focus",function(){$(".error span").hide()});$(".sms-submit").off("click").on("click",function(){var validateCode=$(".sms-input input").val();if(validateCode==""){$(".error span").text("请输入验证码");$(".error span").show();return}$.unmDialog();var paramObj={actId:receiveParamObj.actId,actKey:receiveParamObj.actKey,cityId:receiveParamObj.cityId,validateCode:validateCode,sourceId:receiveParamObj.sourceId,bonusTrigerId:receiveParamObj.bonusTrigerId};coupon.receive.receiveCouponAjax(paramObj,receiveParamObj.callback,true)})}})};return{smsAlertBox:smsAlertBox,count:count}})(jQuery);coupon.common=(function($){var passport_config={base:"//quan.suning.com/",loginTheme:"b2c_pop"};var esjs=document.getElementsByTagName("script");var escss=document.getElementsByTagName("link");var isInclude=function(name,isJs){if(isJs){for(var i=0;i<esjs.length;i++){if(esjs[i][isJs?"src":"href"].indexOf(name)!=-1){return true}}return false}else{for(var i=0;i<escss.length;i++){if(escss[i][isJs?"src":"href"].indexOf(name)!=-1){return true}}return false}};var _loadAsyncJs=function(src,versionNo){if(isInclude(src,true)){return}var _src=src+versionNo;var _scripts=document.getElementsByTagName("script");for(var i=0;i<_scripts.length;i++){if(_scripts[i].src==_src){return}}var _script=document.createElement("script");_script.type="text/javascript";_script.async=true;_script.src=_src;var _s=_scripts[0];_s.parentNode.insertBefore(_script,_s)};var _loadScript=function(src,versionNo,loadCallback){if(isInclude(src,true)){loadCallback();return}var _script=document.createElement("script");_script.type="text/javascript",void 0!==loadCallback&&(_script.readyState?_script.onreadystatechange=function(){"loaded"!=_script.readyState&&"complete"!=_script.readyState||(_script.onreadystatechange=null,loadCallback())}:_script.onload=function(){loadCallback()}),_script.src=src+versionNo,document.body.appendChild(_script)};var _loadAsyncCss=function(_href,versionNo){if(isInclude(_href,false)){return}var _script=document.createElement("link");_script.type="text/css";_script.rel="stylesheet";_script.async=true;_script.href=_href+versionNo;document.getElementsByTagName("head")[0].appendChild(_script)};var getUrlParam=function(name){var reg=new RegExp("(^|&)"+name+"=([^&]*)(&|$)","i");var r=window.location.search.substr(1).match(reg);if(r!=null){return decodeURI(r[2])}return""};var setCookie=function(keyStr,valStr){var v3=window.location.href;v3=v3.substring(v3.indexOf("//")+2);v3=v3.substring(0,v3.indexOf("/"));if(v3.indexOf(".")>0){v3=v3.substring(v3.indexOf("."))}var domain=v3;var path="/";var str=keyStr+"="+encodeURIComponent(valStr)+";domain="+domain+";path="+path;document.cookie=str};var getCookieByKey=function(c_name){if(document.cookie.length>0){c_start=document.cookie.indexOf(c_name+"=");if(c_start!=-1){c_start=c_start+c_name.length+1;c_end=document.cookie.indexOf(";",c_start);if(c_end==-1){c_end=document.cookie.length}return unescape(document.cookie.substring(c_start,c_end))}}return""};return{isInclude:isInclude,_loadAsyncJs:_loadAsyncJs,_loadScript:_loadScript,_loadAsyncCss:_loadAsyncCss,getUrlParam:getUrlParam,setCookie:setCookie,getCookieByKey:getCookieByKey,passport_config:passport_config}})(jQuery);coupon.analytics=(function($){var sendSAErrorMessage=function(id,message){var msgList=message.split("&&");var param={type_name:id,error_type:msgList[1],error_code:msgList[0],error_detail:msgList[2],member_id:msgList[3],member_level:"",region:"",bid:"cpfSale"};try{sa.openAPI.sendMsgV2(param);sa.openAPI.sendMessage(id,message)}catch(e){}};var sendUomErrorMsg=function(errorType,errorCode,status,errorDesc,businessParam){var errorDetail='{"errorDesc":"'+errorDesc+'","businessParam":"'+businessParam+'"}';var param={status:status,error_type:errorType,error_code:errorCode,error_detail:errorDetail,member_id:coupon.common.getCookieByKey("custno"),member_level:coupon.common.getCookieByKey("custLevel"),region:"",bid:"cpfUom"};try{sa.openAPI.sendMsgV2(param)}catch(e){}};return{sendSAErrorMessage:sendSAErrorMessage,sendUomErrorMsg:sendUomErrorMsg}})(jQuery);coupon.init=(function($){var alertValidateHtml=function(){var alertHtml='<div class="m-lion-dialog-fiexd dialog-siller-fiexd" style="display: none;position:fixed;z-index:8002;top:0;left:0;right:0;bottom:0;background-color:#000;filter:alpha(opacity=30);opacity:0.3"></div><div class="m-lion-dialog dialog-siller" style="width: 448px; height: 260px; margin-left: -224px; margin-top: -130px; top: 50%; display: none;">  <div class="container">  	<div class="title"><h3>领取优惠券</h3></div>  	<a href="javascript:coupon.init.closeValidateAlert();" class="btn close" title="关闭" style="z-index: 10;"></a>  	<div class="content">  		<div class="coupon-dialog has-get" style="padding: 52px 0;">    			<p class="tips"><i class="tip-icon tip-info-24"></i><span id="failMsg"></span></p>				<div id="sillerCodeDivPcApi" class="dt_parent float" style="margin:30px auto 50px;display: none;"></div>    			<div class="dialog-common identify-code" id="imageCodeDiv" style="display: none;">      			<div class="code-input clearfix">        				<dl>          				<dt class="l">验证码</dt>          				<dd class="l">            					<p class="item-ide">			   						<input autocomplete="off" onkeyup="coupon.imageCode.keyupFunc();" onfocus="coupon.imageCode.focusFunc();" class="ui-text l" type="text" placeholder="以下字符不区分大小写" id="inputCode" >			   						<i id="tipCode" ></i>			 					</p>			 					<p class="item-ide">			   						<img onclick="coupon.imageCode.changeCode();" id="imgCode" class="l" src="" />			   						<span class="change l">看不清楚？<a href="javascript:void(0);" onclick="coupon.imageCode.changeCode();">换一张</a></span>			 					</p>		   					</dd>		 				</dl>	   				</div>    			</div>    			<div class="coupon-dialog-btn" style="margin-top: 20px;">    				<a href="javascript:coupon.init.closeValidateAlert();" class="siller-close closeThis">关闭</a>    				<a href="javascript:;" class="siller-confirm">确定</a>    			</div>  		</div>  	</div>  </div></div>';$("body").append(alertHtml)};var closeValidateAlert=function(){$(".dialog-siller,.dialog-siller-fiexd").hide()};var dfpTokenInit=function(){if(typeof(_dfp)!="undefined"){_dfp.init({appCode:"UfggrFD1MpeUazVs",env:"prd",success:function(token){receiveParamObj.cpfdfptoken=token},error:function(e){coupon.analytics.sendSAErrorMessage("coupon_receive_api_pc","&&dfp.init&&dfpToken初始化异常:"+e+"&&"+coupon.common.getCookieByKey("custno"))}})}};var detectInit=function(){if(typeof(bd)!="undefined"){bd.init({token:"other",system:"CPF",url:"//dt.suning.com/detect/dt/portoToken.json"})}};return{alertValidateHtml:alertValidateHtml,closeValidateAlert:closeValidateAlert,dfpTokenInit:dfpTokenInit,detectInit:detectInit}})(jQuery);$(function(){if(!coupon.common.isInclude("jquery",true)){alert("请引入jQuery.js")}$("script").each(function(){if($(this).attr("src")!=undefined&&$(this).attr("src").indexOf("couponReceive.js")!=-1){if($(this).attr("src").lastIndexOf("?")<=0){version=""}else{version=$(this).attr("src").substring($(this).attr("src").lastIndexOf("?"))}return false}});if(typeof(ensureLogin)!="function"){coupon.common._loadAsyncJs("//res.suning.cn/project/passport/js/passport.min.js",version)}if(typeof(bd)=="undefined"){coupon.common._loadScript("//dt.suning.com/detect/dt/detect.js",version,coupon.init.detectInit)}else{coupon.init.detectInit()}if(typeof(_dfp)=="undefined"){coupon.common._loadScript("//dfp.suning.com/dfprs-collect/dist/dfp.js",version,coupon.init.dfpTokenInit)}else{coupon.init.dfpTokenInit()}if(typeof(sa)=="undefined"||typeof(sa.openAPI)=="undefined"||typeof(sa.openAPI.sendMsgV2)!="function"){coupon.common._loadAsyncJs("//res.suning.cn/javascript/sn_da/da_opt.js",version);coupon.common._loadAsyncJs("//res.suning.cn/javascript/sn_da/sa-analytics.js",version)}if(typeof($.mDialog)!="function"){coupon.common._loadAsyncJs("//res.suning.cn/javascript/SFE.dialog.js",version)}coupon.common._loadAsyncCss("//res.suning.cn/public/v3/css/??v3common.min.css",version);coupon.common._loadAsyncCss("//res.suning.cn/project/cpf/js/api/pc/css/coupon.css",version);coupon.common._loadAsyncCss("//res.suning.cn/project/cpf/css/validateCode.css",version);if(typeof(siller)=="undefined"||typeof(siller.init)!="function"){coupon.common._loadAsyncCss("//dt.suning.com/detect/static/siller.css",version);coupon.common._loadAsyncJs("//dt.suning.com/detect/dt/siller.js",version)}coupon.init.alertValidateHtml()});(function(d,e){var a=d.document,b=d.location;var c={pids_new:"",noConflict:function(){d.apsAdboardGroupObj=_apsAdboardGroupObj;return c},aps_adboard_jsonpCallback:function(g,f,i){try{if((g!=null&&""!=g)&&(f!=null&&""!=f)&&(i!=null&&""!=i)){switch(f){case"cpm":if(typeof(aps_adboard_romancecpmGroup)=="function"){aps_adboard_romancecpmGroup(g,i)}else{c.aps_adboard_defaultRomanceCpmGroup(g,i)}break;default:throw new Error("adType error!");break}}else{throw new Error("callback data is null")}}catch(h){if(typeof(aps_adboard_errors)=="function"){aps_adboard_errors(h)}}},aps_adboard_addScriptTag:function(h,j,i){var f=a.createElement("script");var g=a.head||a.getElementsByTagName("head")[0]||a.documentElement;f.async=true;f.setAttribute("type","text/javascript");f.src=h;f.id=j+"jsonp";f.onload=function(){if(!f.readyState){c.aps_adboard_delScript(f,g);i("200",j)}};f.onerror=function(){c.aps_adboard_delScript(f,g);i("request error",j)};f.onreadystatechange=function(){if(/loaded|complete/.test(f.readyState)){c.aps_adboard_delScript(f,g)}};g.insertBefore(f,g.firstChild)},aps_adboard_delScript:function(f,g){f.onreadystatechange=null;f.onload=null;if(g&&f.parentNode){g.removeChild(f)}f=e},aps_adboard_loadAdCpmGroup:function(m,f,k){var l=sn.apsDomainUrl;if(null==m||""==m){throw new Error("pids is null");return}var h=l+"/getCpmDatasGroup?";for(var g=0;g<m.length;g++){if(g==0){h=h+"pid="+m[g]}else{h=h+"&pid="+m[g]}}if(null!=k&&""!=k){h=h+"&inputTime="+k}if(null!=f&&""!=f){h=h+"&screenType="+f}try{this.aps_adboard_addScriptTag(h,m,function(i,n){if(i!="200"){if(typeof(aps_adboard_errors)=="function"){aps_adboard_errors(n,i)}if(typeof(aps_adboard_cpm_errors)=="function"){aps_adboard_cpm_errors(n,i)}}})}catch(j){throw new Error("request net error")}c.pids_new=m;setTimeout("apsAdboardGroupObj.aps_adboard_defaultOutTime(apsAdboardGroupObj.pids_new)",500);return},aps_adboard_defaultRomanceCpmGroup:function(j,m){if(j==null){return}if(m==null){return}try{var l="";var h;var f;for(var g=0;g<j.length;g++){l='<a name="sn_link_'+j[g].pid+'" target="_blank"   href="'+j[g].apsClickUrl+'"><img src="'+j[g].adSrc+'" title="'+j[g].title+'" alt="'+j[g].title+'" border="0" /></a>';if(m instanceof Array){f=m[g]}else{f=m}h=a.getElementById("aps_adboard_"+f);if(h!=null){h.innerHTML=l}else{throw new Error("pid div not exist")}}}catch(k){throw new Error(k)}},aps_adboard_defaultErrors:function(f){},aps_adboard_defaultOutTime:function(h){var f=a.getElementById(h+"jsonp");if(f){var g=a.head||a.getElementsByTagName("head")[0]||a.documentElement;this.aps_adboard_delScript(f,g);if(typeof(aps_adboard_outTime)=="function"){aps_adboard_outTime(h)}}}};d.apsAdboardGroupObj=c})(window);(function(c,d){var a=c.document,b=c.location;var e={noConflict:function(){c.apsAdboardCptPvObj=_apsAdboardCptPvObj;return e},aps_adboard_addScriptTag:function(h,i){var f=a.createElement("img");var g=a.head||a.getElementsByTagName("head")[0]||a.documentElement;f.src=h;f.onload=function(){if(!f.readyState){e.aps_adboard_delScript(f,g);i("200")}};f.onerror=function(){e.aps_adboard_delScript(f,g);i("request error")};f.onreadystatechange=function(){if(/loaded|complete/.test(f.readyState)){e.aps_adboard_delScript(f,g)}};g.insertBefore(f,g.firstChild)},aps_adboard_delScript:function(f,g){f.onreadystatechange=null;f.onload=null;if(g&&f.parentNode){g.removeChild(f)}f=d},aps_adboard_loadAdCptPv:function(f,i){var j=sn.apsDomainUrl;if(null==f||""==f){throw new Error("pid is null");return}var g=j+"/calCptPv.gif?";g=g+"positionID="+f;if(null!=i&&""!=i){g=g+"&time="+i}try{this.aps_adboard_addScriptTag(g,function(k){if(k!="200"){if(typeof(aps_adboard_errors)=="function"){aps_adboard_errors(k)}else{apsAdboardCptGroupObj.aps_adboard_defaultErrors(k)}}})}catch(h){throw new Error("request net error")}return},aps_adboard_defaultErrors:function(f){if(typeof(f)=="string"){alert(f)}else{alert(f.message)}}};c.apsAdboardCptPvObj=e})(window);var ECity=ECity||{};ECity.setting={};ECity.setting.data={cookie:{cookieKey:"SN_CITY",cookieVale:"",hostName:"",cityOuterSepatator:"|",cityInnerSeparator:"_",cookiePath:"",cookieTime:"",cookieDomain:"",oldCookieCityKey:"cityId",oldCookieDistrictKey:"districtId",oldCookieCityValue:"",oldCookieDistrictValue:"",hostDomain:"",protocol:"",port:"",root:"",protocolSepatator:"//",portSepatator:":",root:"/ip-web"},url:{cookieUrl:"",cityArrayUrl:"",districtArrayUrl:"",districtUrl:"",lesUrl:""},flag:{user:"1",sys:"2",sys_user:"3",fail_query:"4",sys_error:"5"},type:{pc:"pc",pcd:"pcd"},city:{cityArray:[],cityType:"",cityInfo:{}},init:function(f){var e=ECity.setting.data;var c=e.cookie;var b=e.url;var g=e.city;var d=e.type;c.hostName=document.location.hostname;c.hostDomain=document.location.hostname;c.protocol=document.location.protocol;c.port=document.location.port;var a=new Date();a.setFullYear(a.getFullYear()+1);c.cookieTime="; expires = "+a.toUTCString();c.cookiePath="; path = /";if(c.hostName.indexOf(".suning.com")!=-1){c.cookieDomain="; domain =.suning.com";c.hostName=c.protocol+"//ipservice.suning.com"}else{if(c.hostName.indexOf(".cnsuning.com")!=-1){c.cookieDomain="; domain =.cnsuning.com";if(c.hostName.indexOf("pre")!=-1){c.hostName=c.protocol+"//ipservicepre.cnsuning.com"}else{c.hostName=c.protocol+"//ipservicepre.cnsuning.com"}}else{c.cookieDomain+=c.hostName;c.hostName="http://localhost:8080/ip-web"}}b.cookieUrl=c.hostName+"/ipQuery.do?";b.provinceArrayUrl=c.hostName+"/provinceList-";b.cityArrayUrl=c.hostName+"/cityList-";b.districtArrayUrl=c.hostName+"/districtList-";b.districtUrl=c.hostName+"/districtDetail-";b.lesUrl=c.hostName+"/cityAndDistrict-";b.provinceAndCityUrl=c.hostName+"/provinceAndCity-";b.cityMapById=c.hostName+"/cityMapById-";b.reportIpUrl=c.hostName+"/report/reportIp.do?";b.reportSwitchUrl=c.hostName+"/report/querySwitch.htm";g.cityType=f?d.pc:d.pcd}};ECity.setting.util={equalsByPCD:function(a,b){if(!a||!b){return false}if(a.provinceMDMId==b.provinceMDMId&&a.cityMDMId==b.cityMDMId&&a.districtCommerceId==b.districtCommerceId){return true}return false},equalsByPC:function(a,b){if(!a||!b){return false}if(a.provinceMDMId==b.provinceMDMId&&a.cityMDMId==b.cityMDMId){return true}return false},isEmpty:function(b){if(!b){return true}for(var a in b){if(typeof b[a]!="undefined"){return false}}return true},equalsByCD:function(d,c,a){if(!d){return null}if(!c){return null}if(!a||a.length==0){return null}for(var b in a){if(d===a[b].cityCommerceId&&c===a[b].districtCommerceId){return a[b]}}return null},equalsByC:function(c,a){if(!c){return null}if(!a||a.length==0){return null}for(var b in a){if(c===a[b].cityCommerceId){return a[b]}}return null},convertToOut:function(b){if(!b||this.isEmpty(b)){return null}var a={};a.province={};a.city={};a.district={};a.province.id=b.provinceMDMId;a.province.cid=b.provinceCommerceId;a.province.name=b.provinceName;a.city.id=b.cityMDMId;a.city.cid=b.cityCommerceId;a.city.lesId=b.cityLESId;a.city.name=b.cityName;a.district.id=b.districtMDMId;a.district.cid=b.districtCommerceId;a.district.lesId=b.districtLESId;a.district.name=b.districtName;return a},convertToIn:function(a){if(!a||this.isEmpty(a)){return null}var b={};if(a.province&&!this.isEmpty(a.province)){b.provinceMDMId=a.province.id;b.provinceCommerceId=a.province.cid;b.provinceName=a.province.name}if(a.city&&!this.isEmpty(a.city)){b.cityMDMId=a.city.id;b.cityCommerceId=a.city.cid;b.cityLESId=a.city.lesId;b.cityName=a.city.name}if(a.district&&!this.isEmpty(a.district)){b.districtMDMId=a.district.id;b.districtLESId=a.district.lesId;b.districtCommerceId=a.district.cid;b.districtName=a.district.name}return b}};ECity.IPCookie=(function(){var I=ECity.setting.data;var i=ECity.setting.util;var v=I.cookie;var x=I.flag;var M=I.type;var m=I.city;var c=I.url;var B=[];function G(N){B=B.concat(N)}var C=[];function l(N){C=C.concat(N)}var z=[];function y(N){z=z.concat(N)}var t=[];function F(N){t=t.concat(N)}var g=function(P){D();if(v.cookieValue){var O=v.cookieValue;var N=O.split(v.cityOuterSepatator);s(N,P)}else{H(P)}};var H=function(O){A();var N={};if(v.oldCookieCityValue){if(v.oldCookieDistrictValue){N=i.equalsByCD(v.oldCookieCityValue,v.oldCookieDistrictValue,m.cityArray);if(N){m.cityInfo=N;if(!i.equalsByPCD(N,m.cityArray[0])){b();q()}if(typeof O=="function"){O(i.convertToOut(m.cityInfo))}}else{e(O)}}else{N=i.equalsByC(v.oldCookieCityValue,m.cityArray);if(N){m.cityInfo=N;a();if(!i.equalsByPCD(N,m.cityArray[0])){b();q()}if(typeof O=="function"){O(i.convertToOut(m.cityInfo))}}else{e(O)}}}else{if(m.cityArray&&m.cityArray.length!=0){m.cityInfo=m.cityArray[0];a();if(typeof O=="function"){O(i.convertToOut(m.cityInfo))}}else{e(O)}}};var u=function(N,O){if(N&&!i.isEmpty(N)){m.cityInfo=i.convertToIn(N)}K();b();a();q();if(typeof O=="function"){O(i.convertToOut(m.cityInfo))}};var K=function(){var Q=m.cityArray;var P=m.cityInfo;if(!Q||i.isEmpty(Q[0])){return}var N=Q[0];if(N.flag==x.user){var O=c.reportSwitchUrl;$.ajax({type:"GET",url:O,cache:true,async:false,jsonp:false,dataType:"jsonp",jsonpCallback:"switchcallback",success:function(R){if(R.returnCode==1&&R.switchValue==0){p(P.cityLESId)}},error:function(R,T,S){}})}};var p=function(O){var N=c.reportIpUrl+"cityId="+O;$.ajax({type:"GET",url:N,cache:true,async:false,jsonp:false,dataType:"jsonp",jsonpCallback:"",success:function(P){},error:function(){}})};var D=function(){var N=document.cookie;if(!N){return}var Q=N.match(RegExp("(^| )"+v.oldCookieCityKey+"=([^;]*)(;|$)"));var P=N.match(RegExp("(^| )"+v.oldCookieDistrictKey+"=([^;]*)(;|$)"));var O=N.match(RegExp("(^| )"+v.cookieKey+"=([^;]*)(;|$)"));if(Q&&Q[2]&&Q[2].length!=0){v.oldCookieCityValue=decodeURIComponent(Q[2])}if(P&&P[2]&&P[2].length!=0){v.oldCookieDistrictValue=decodeURIComponent(P[2])}if(O&&O[2]&&O[2].length!=0){v.cookieValue=decodeURIComponent(O[2])}};var e=function(N){G(N);if(B.length==1){d(N)}};var d=function(O){var N=c.cookieUrl;if(v.oldCookieCityValue){N+=v.oldCookieCityKey+"="+v.oldCookieCityValue;if(v.oldCookieDistrictValue){N+="&"+v.oldCookieDistrictKey+"="+v.oldCookieDistrictValue}}$.ajax({type:"GET",url:N,cache:true,async:false,dataType:"jsonp",jsonpCallback:"cookieCallback",success:function(P){var R=[];if(v.oldCookieCityValue){if(v.oldCookieDistrictValue){P.flag=x.user;P.count=1}else{P.flag=x.sys_user;P.count=0}}else{P.flag=x.sys;P.count=0}if(P.status==0){P.flag=x.fail_query}m.cityInfo=P;if(m.cityArray&&m.cityArray.length!=0){b()}else{R.push(P);m.cityArray=R}q();if(v.oldCookieCityValue&&v.oldCookieDistrictValue&&v.oldCookieDistrictValue!=P.districtCommerceId){a()}if(!v.oldCookieCityValue||!v.oldCookieDistrictValue){a()}if(typeof O=="function"){for(var Q in B){B[Q](i.convertToOut(m.cityInfo))}B=[]}}})};function n(){}var s=function(V,U){var O=[];var P=V[0].split(v.cityInnerSeparator);var R={};var Q=P[0];var N=P[1];var S=P[4];var T=c.cityMapById+Q+"-"+N+"-"+S+"-cityMapCallback.htm";$.ajax({type:"GET",url:T,cache:true,async:true,dataType:"jsonp",jsonp:false,jsonpCallback:"cityMapCallback",success:function(Z){if(Z.returnCode=="1"){R.provinceMDMId=Z.pMdmId;R.provinceLESId=Z.pMdmId}else{R.provinceMDMId=P[0];R.provinceLESId=P[0]}R.provinceCommerceId="";R.provinceName=Z.pName;if(Z.returnCode=="2"){R.cityLESId=Z.cLesId;R.cityMDMId=Z.cMdmId;R.cityCommerceId=Z.cCommerceId}else{R.cityLESId=P[1];R.cityMDMId=P[2];R.cityCommerceId=P[3]}R.cityName=Z.cName;if(Z.returnCode=="3"||Z.returnCode=="2"){R.districtLESId=Z.dLesId;R.districtCommerceId=Z.dCommerceId}else{R.districtLESId=P[4];R.districtCommerceId=P[5]}R.districtMDMId="";R.districtName=Z.dName;R.flag=P[6];R.count=P[7];var W=false;var Y=m.cityArray.length;for(var X=0;X<Y;X++){if(i.equalsByPCD(m.cityArray[X],R)){W=true}}if(!W){m.cityArray.push(R)}V.shift();if(Z.returnCode!="0"){E();q()}if(m.cityArray.length==1&&Z.returnCode!="0"){L();a()}if(V.length==0){H(U)}else{s(V,U)}}})};var E=function(){var N=new Date();N.setTime(N.getTime()-10000);cookieTemp=v.cookieKey+"="+encodeURIComponent("");cookieTemp+="; expires = "+N.toGMTString();cookieTemp+=v.cookiePath;cookieTemp+=v.cookieDomain;document.cookie=cookieTemp};var L=function(){var N=new Date();N.setTime(N.getTime()-10000);cookieCity=v.oldCookieCityKey+"="+encodeURIComponent("");cookieCity+="; expires = "+N.toGMTString();cookieCity+=v.cookiePath;cookieCity+=v.cookieDomain;document.cookie=cookieCity;v.oldCookieCityValue="";cookieDistrict=v.oldCookieDistrictKey+"="+encodeURIComponent("");cookieDistrict+="; expires = "+N.toGMTString();cookieDistrict+=v.cookiePath;cookieDistrict+=v.cookieDomain;document.cookie=cookieDistrict;v.oldCookieDistrictValue=""};var A=function(){var R=m.cityArray;if(!R||R.length==0){return}var P=R.length;for(var O=0;O<P;O++){var Q=R[O];if(Q.provinceMDMId==Q.cityLESId||!Q.cityLESId||Q.cityLESId=="null"||typeof Q.cityLESId=="undefined"||Q.districtLESId=="null"||typeof Q.districtLESId=="undefined"||typeof Q.cityName=="undefined"||typeof Q.districtName=="undefined"){if(v.cookieValue){var N=new Date();N.setTime(N.getTime()-10000);cookieTemp=v.cookieKey+"="+encodeURIComponent("");cookieTemp+="; expires = "+N.toGMTString();cookieTemp+=v.cookiePath;cookieTemp+=v.cookieDomain;document.cookie=cookieTemp;cookieCity=v.oldCookieCityKey+"="+encodeURIComponent("");cookieCity+="; expires = "+N.toGMTString();cookieCity+=v.cookiePath;cookieCity+=v.cookieDomain;document.cookie=cookieCity;v.oldCookieCityValue="";cookieDistrict=v.oldCookieDistrictKey+"="+encodeURIComponent("");cookieDistrict+="; expires = "+N.toGMTString();cookieDistrict+=v.cookiePath;cookieDistrict+=v.cookieDomain;document.cookie=cookieDistrict;v.oldCookieDistrictValue="";m.cityArray=null;break}}}};var a=function(){var O=m.cityArray;if(!O||O.length==0){return}v.oldCookieCityValue=O[0].cityCommerceId;v.oldCookieDistrictValue=O[0].districtCommerceId;var N="";var P="";N=v.oldCookieCityKey+"="+encodeURIComponent(v.oldCookieCityValue);N+=v.cookieTime;N+=v.cookiePath;N+=v.cookieDomain;document.cookie=N;P=v.oldCookieDistrictKey+"="+encodeURIComponent(v.oldCookieDistrictValue);P+=v.cookieTime;P+=v.cookiePath;P+=v.cookieDomain;document.cookie=P};var q=function(){var P=m.cityArray;var R="";var Q="";if(!P||P.length==0){return}var O=P.length;for(var N=0;N!=O;N++){Q+=P[N].provinceMDMId;Q+=v.cityInnerSeparator;Q+=P[N].cityLESId;Q+=v.cityInnerSeparator;Q+=P[N].cityMDMId;Q+=v.cityInnerSeparator;Q+=P[N].cityCommerceId;Q+=v.cityInnerSeparator;Q+=P[N].districtLESId;Q+=v.cityInnerSeparator;Q+=P[N].districtCommerceId;Q+=v.cityInnerSeparator;Q+=P[N].flag;Q+=v.cityInnerSeparator;Q+=P[N].count;if(N==O-1){break}Q+=v.cityOuterSepatator}v.cookieValue=Q;R=v.cookieKey+"="+encodeURIComponent(v.cookieValue);R+=v.cookieTime;R+=v.cookiePath;R+=v.cookieDomain;document.cookie=R};var b=function(){var T=m.cityArray;var Q=m.cityType;var S=m.cityInfo;if(i.isEmpty(S)||!T||i.isEmpty(T[0])){return}var P=[];var R=T[0];var O=T[1];var N=T[2];if(Q==M.pc){if(R.flag==x.sys||R.flag==x.fail_query){S.flag=x.sys_user;S.count=0;P.push(S);m.cityArray=P;return}if(R.flag==x.sys_user){if(i.equalsByPC(S,R)){return}else{if(i.equalsByPC(S,O)){P.push(O);if(!i.isEmpty(N)){P.push(N)}m.cityArray=P;return}else{if(i.equalsByPC(S,N)){P.push(N);P.push(O);m.cityArray=P;return}else{S.flag=x.sys_user;S.count=0;P.push(S);if(!i.isEmpty(O)){P.push(O);if(!i.isEmpty(N)){P.push(N)}}m.cityArray=P;return}}}}if(R.flag==x.user){if(i.equalsByPC(S,R)){return}else{if(i.equalsByPC(S,O)){P.push(O);P.push(R);if(!i.isEmpty(N)){P.push(N)}m.cityArray=P;return}else{if(i.equalsByPC(S,N)){P.push(N);P.push(R);P.push(O);m.cityArray=P;return}else{S.flag=x.sys_user;S.count=0;P.push(S);P.push(R);if(!i.isEmpty(O)){P.push(O)}m.cityArray=P;return}}}}}else{if(R.flag==x.sys||R.flag==x.fail_query){S.flag=x.user;S.count=1;P.push(S);m.cityArray=P;return}if(R.flag==x.sys_user){if(i.equalsByPCD(S,R)){R.count++;R.flag=x.user;return}else{if(i.equalsByPCD(S,O)){O.count++;P.push(O);if(!i.isEmpty(N)){P.push(N)}m.cityArray=P;return}else{if(i.equalsByPCD(S,N)){N.count++;P.push(N);P.push(O);m.cityArray=P;return}else{S.flag=x.user;S.count=1;P.push(S);if(!i.isEmpty(O)){P.push(O);if(!i.isEmpty(N)){P.push(N)}}m.cityArray=P;return}}}}if(R.flag==x.user){if(i.equalsByPCD(S,R)){R.count++;return}else{if(i.equalsByPCD(S,O)){O.count++;P.push(O);P.push(R);if(!i.isEmpty(N)){P.push(N)}m.cityArray=P;return}else{if(i.equalsByPCD(S,N)){N.count++;P.push(N);P.push(R);P.push(O);m.cityArray=P;return}else{S.flag=x.user;S.count=1;P.push(S);P.push(R);if(!i.isEmpty(O)){P.push(O)}m.cityArray=P;return}}}}}};var j=function(N,O){y(O);if(z.length==1){f(N,O)}};var f=function(O,P){var N=c.cityArrayUrl+O+"_20150401-cityListCallback.htm";$.ajax({type:"GET",url:N,cache:true,async:true,dataType:"jsonp",jsonp:false,jsonpCallback:"cityListCallback",success:function(V){var T=[];T=V.cities;var W=[];var U=T.length;for(var S=0;S!=U;S++){var Q={};Q.name=T[S].name;Q.id=T[S].mdmId;Q.cid=T[S].commerceId;Q.lesId=T[S].lesId;Q.pinyin=T[S].pinyin.charAt(0);Q.defaultId=T[S].defaultDistrictMdmId;W.push(Q)}if(typeof P=="function"){for(var R in z){z[R](W)}z=[]}}})};var r=function(N,O){F(O);if(t.length==1){w(N,O)}};var w=function(O,P){var N=c.districtArrayUrl+O+"_20150401-districtListCallback.htm";$.ajax({type:"GET",url:N,cache:true,async:true,dataType:"jsonp",jsonp:false,jsonpCallback:"districtListCallback",success:function(R){var U=[];U=R.districts;var W=[];var V=U.length;for(var T=0;T!=V;T++){var Q={};Q.name=U[T].name;Q.id=U[T].mdmId;Q.cid=U[T].commerceId;Q.lesId=U[T].lesId;Q.pinyin=U[T].pinyin.charAt(0);W.push(Q)}if(typeof P=="function"){for(var S in t){t[S](W)}t=[]}}})};var h=function(N){l(N);if(C.length==1){J(N)}};var J=function(O){var N=c.provinceArrayUrl+"provinceListCallback.htm";$.ajax({type:"GET",url:N,cache:true,async:true,dataType:"jsonp",jsonp:false,jsonpCallback:"provinceListCallback",success:function(S){var T=[];T=S.provinces;var V=[];var U=T.length;for(var R=0;R!=U;R++){var P={};P.name=T[R].name;P.id=T[R].mdmId;P.cid=T[R].commerceId;P.pinyin=T[R].pinyin.charAt(0);P.defaultId=T[R].defaultCityMdmId;V.push(P)}if(typeof O=="function"){for(var Q in C){C[Q](V)}C=[]}}})};var o=function(O,P){var N=c.districtUrl+O+"_20150401-districtCallback.htm";$.ajax({type:"GET",url:N,cache:true,async:true,dataType:"jsonp",jsonp:false,jsonpCallback:"districtCallback",success:function(Q){var R={};if(typeof P=="function"){R.id=Q.mdmId;R.cid=Q.commerceId;R.lesId=Q.lesId;R.name=Q.name;P(R)}}})};var k=function(P,O){var N=c.provinceAndCityUrl+P+"-provinceandcityCallBack.htm";$.ajax({type:"GET",url:N,cache:true,async:true,dataType:"jsonp",jsonp:false,jsonpCallback:"provinceandcityCallBack",success:function(S){var R={};var Q={};if(typeof O=="function"){Q.pMdmId=S.pMdmId;Q.pName=S.pName;Q.cMdmId=S.cMdmId;Q.cCommerceId=S.cCommerceId;Q.cName=S.cName;R.provinceAndCity=Q;O(R)}}})};return{showCity:g,setCity:u,getRemoteDistrict:o,getRemoteDistrictArray:r,getRemoteCityArray:j,getRemoteProvinceArray:h,getProvinceAndCityByCityId:k}}());ECity.API={init:function(a){ECity.setting.data.init(a)},ipCookie:ECity.IPCookie,util:ECity.setting.util,getCity:function(a){this.ipCookie.showCity(a)},setCity:function(a,b){this.ipCookie.setCity(a,b)},getDataCity:function(){var b=ECity.setting.data.city.cityArray;var a={};if(b&&!this.util.isEmpty(b[0])){a=this.util.convertToOut(b[0])}return a},getLastUsedCities:function(){var c=ECity.setting.data.city.cityArray;var b=[];if(c){for(var a in c){b.push(this.util.convertToOut(c[a]))}}return b},getCityId:function(){var a=ECity.setting.data.city.cityArray;if(a&&!this.util.isEmpty(a[0])){return a[0].cityCommerceId}return""},getDistrictId:function(){var a=ECity.setting.data.city.cityArray;if(a&&!this.util.isEmpty(a[0])){return a[0].districtCommerceId}return""},getDistrict:function(a,b){this.ipCookie.getRemoteDistrict(a,b)},getDistrictList:function(b,a){this.ipCookie.getRemoteDistrictArray(b,a)},getCityList:function(a,b){this.ipCookie.getRemoteCityArray(a,b)},getProvinceList:function(a){this.ipCookie.getRemoteProvinceArray(a)},getProvinceAndCityByCityId:function(b,a){this.ipCookie.getProvinceAndCityByCityId(b,a)}};(function(d){if(!jQuery){throw new Error("The plugin requires jQuery")}var i=function(){if(this instanceof i==false){return new i()}};i.prototype={init:function(k,j){this.eles=k;this.opts=j;this.flag=true;this.render()},render:function(){var j=this;this.setTemps(function(k){j.getCity(k)})},setTemps:function(n){var p=this;var j=this.eles;var o=this.opts;var m='<style id="ui-city-style">ul,li,p,h3,h5,em,b,i,span,a{ margin: 0; padding: 0; }ul,li { list-style: none; }.clearfix:after{ content:"."; display:block; height:0; clear:both; visibility:hidden}.clearfix{ zoom:1}.ui-city a,.ui-city a:visited{ line-height:14px; color:#333; text-decoration: none; outline: none; cursor: pointer;}.ui-city a:hover { text-decoration:none; }.ui-city { display:inline-block;*dispplay:inline;*zoom:1; font-size: 12px; position: relative; z-index: 0}.ui-city .dn { display: none; }.ui-city .db { display: block; }.ui-city .dib { display: inline-block; }.ui-city .arr { display: inline-block; width: 0; height:0; border-color: #bbb transparent transparent; border-width: 6px 4px; border-style: solid dashed dashed; font-size: 0; line-height: 0; overflow: hidden; }.ui-city a.ui-city-toggle:hover { color:#333;}.ui-city-toggle { display:inline-block; height: 24px; padding:6px 5px 6px 6px; color: #000; position: relative; z-index: 100;}.ui-city-toggle .address-placement {font-style: normal; float: left; line-height: 24px;}.ui-city-toggle .address-icon {}.ui-city-toggle span { padding-right: 5px}.ui-city-toggle span:hover {color: #333;}.ui-city-toggle .arr { margin-right:5px;position: relative; top:11px; float: left;}.ui-city-group { display:none; position: absolute;background: #fff; left: 0; top:36px; margin-top:-1px; width: 370px; z-index: 99; box-shadow:0 2px 4px 0 rgba(225,225,225,0.50);padding-top:5px;}.ui-city-group .ui-city-close  { position: absolute;right: 0;top: 0;padding: 5px 10px;overflow: hidden;}.ui-city-group .ui-city-close i { font: 700 14px/1.5 simsun;margin-left:-4px; color: #aaa}.ui-city-group-header { padding-top: 10px;  }.ui-city-group-header p { padding-left:15px; margin-bottom: 10px; }.ui-city-group-header .address-item {clear:both; }.ui-city-group-header .address-item a,.ui-city-group-header .address-item a:visited{ display: inline-block;zoom:1; padding-top: 4px; padding-left: 5px; padding-bottom: 4px; margin-right: 10px; border: 1px solid #bbb; }.ui-city-group-header .address-item a:hover {  background: #fa0; color: #fff;border:1px solid #fa0; }.ui-city-group-header .address-item a span { padding-right:5px}.ui-city-group-content { width: 370px; background:#fff;}.ui-city-group-content .nav-tabs { padding-left: 14px  }.ui-city-group-content .nav-tabs li {float: left; position: relative; z-index:2;border: 1px solid #ededed; height: 26px;background:#fff;margin-right: 6px; margin-bottom:0; cursor: pointer; }.ui-city-group-content .nav-tabs li p { padding: 6px 15px 6px 15px;border:1px solid #fff; }.ui-city-group-content .nav-tabs li a,.ui-city-group-content .nav-tabs li a:visited{ color: #999;float: left}.ui-city-group-content .nav-tabs li .arr { display:none; position: relative; top: 3px;left: 5px;font-size: 0; line-height: 0;}.ui-city-group-content .nav-tabs li.current { border-bottom:none; z-index: 4;}.ui-city-group-content .nav-tabs li.current p { padding: 7px 16px 6px 16px; position: relative; z-index: 4; border:none; }.ui-city-group-content .nav-tabs li.current .arr { border-color:  transparent transparent #fa0; border-style:  dashed dashed solid; top:-2px; }.ui-city-group-content .nav-tabs li.current a,.ui-city-group-content .nav-tabs li.current a:visited{ display:inline-block; color: #333; }.ui-city-group-content .nav-tabs li.active a,.ui-city-group-content .nav-tabs li.active a:visited{ display:inline-block; color: #333; }.ui-city-group-content .tab-content { border-top: 1px solid #ededed;top:-2px;  position: relative; z-index: 3}.ui-city-group-content .tab-content .tab-panel { display: none; padding-top: 3px; padding-bottom: 15px; background: #fff;}.ui-city-group-content .tab-content .tab-panel.active { display: block;}.ui-city-group-content .tab-content li:after { content:"."; display:block; height:0; clear:both; visibility:hidden }.ui-city-group-content .tab-content li { *zoom:1;}.ui-city-group-content .tab-content li span {float:left;width: 92px; height: 20px; margin-top:7px; line-height: 20px; text-align: center;}.ui-city-group-content .tab-content li a,.ui-city-group-content .tab-content li a:visited { display:inline-block; background:#fff; height: 20px; padding: 0 4px;line-height: 20px; color:#000; }.ui-city-group-content .tab-content li a:hover { background: #e9e9e9; color: #ffaa00; border-radius:4px;}.ui-city-group-content .tab-content li a.on,.ui-city-group-content .tab-content li a.on:visited { background: #fa0;color: #fff; border-radius:4px; }.ui-city-group-content .tab-content .pr-panel li a{ }.ui-city.active { z-index: 10}.ui-city.active a.ui-city-toggle {background:#fff;border-bottom:none;box-shadow:0 -2px 4px 0 rgba(225,225,225,0.50);}.ui-city.active a.ui-city-toggle:hover { color: #333; background: #fff; text-decoration: none;}.ui-city.active a.ui-city-toggle .arr{ border-color:  transparent transparent #FA0; border-style: dashed dashed solid; top:3px; }.ui-city.active .ui-city-group { display: block; }.ui-city .arr {transition:All .2s ease;-webkit-transition:All .2s ease;-moz-transition:All .2s ease;-o-transition:All .2s ease;-ms-transition:All .2s ease;}</style>';if(d("#ui-city-style").size()==0){d("body").prepend(d(m))}var l=d('<div class="ui-city"></div>');d("a",p.eles).live("click",function(){return false});var k;this.getInfo={};this.changeFlag=!0;this.queryInfo=function(q){if(o.cityId!=""&&o.cityId!=undefined){o.city=true;p.getAddressByDefault(function(){p.getInfoByCityid(o.cityId,function(r){q(r);setTimeout(function(){n(r)},10)})})}else{p.getAddressByDefault(function(r){q(r);setTimeout(function(){n(r)},10)})}};this.queryInfo(function(s){var q=s.province;var w=s.city;var u=s.district;var v=[q.id,q.cid,"",q.name].join(",");var t=[w.id,w.cid,u.lesId,w.name].join(",");var r=[u.id,u.cid,u.lesId,u.name].join(",");var x=q.id;p.getInfo=s;if(/^10$|^20$|^30$|^320$/.test(x)){if(!!o.city){k=d('<a name="item_none_dizhi_01" href="###" class="ui-city-toggle" hidefocus="true"><i class="address-icon"></i><em class="address-placement"><span id="provinceName" class="pr dn"  role='+v+">"+q.name+'</span><span id="citybName" class="ct"  role='+t+">"+w.name+'</span></em><b class="arr"></b></a>')}else{k=d('<a name="item_none_dizhi_01" href="###" class="ui-city-toggle" hidefocus="true"><i class="address-icon"></i><em class="address-placement"><span id="provinceName" class="pr dn"  role='+v+">"+s.province.name+'</span><span class="ct" id="citybName" role='+t+">"+w.name+'</span><span id="districtName" class="ds" role='+r+">"+u.name+'</span></em><b class="arr"></b></a>')}}else{if(!!o.city){k=d('<a name="item_none_dizhi_01" href="###" class="ui-city-toggle" hidefocus="true"><i class="address-icon"></i><em class="address-placement"><span id="provinceName" class="pr"  role='+v+">"+q.name+'</span><span id="citybName" class="ct"  role='+t+">"+w.name+'</span></em><b class="arr"></b></a>')}else{k=d('<a name="item_none_dizhi_01" href="###" class="ui-city-toggle" hidefocus="true"><i class="address-icon"></i><em class="address-placement"><span id="provinceName" class="pr"  role='+v+">"+q.name+'</span><span id="citybName" class="ct"  role='+t+">"+w.name+'</span><span id="districtName" class="ds" role='+r+">"+u.name+'</span></em><b class="arr"></b></a>')}}l.append(k);d(j).append(l);p.openPanel(o,s)})},openPanel:function(l,m){var k=this;var j=d(this.eles).find(".ui-city");j.one("click.open",function(o){var n=o||n;if(n){n.stopPropagation()}k.getAllDetail(l,m);d(this).addClass("active");return false})},closePanel:function(){var l=this;var j=d(this.eles).find(".ui-city");var k=d(this.eles).find(".ui-city-close");k.on("click.close",function(n){var m=n||m;if(m){m.stopPropagation()}j.removeClass("active");return false});d(document).not(this).on("click.close",function(){if(!j.hasClass("active")){return}j.removeClass("active");return false})},getAllDetail:function(r,E){var o=this;var v=this.eles;var j=E.province;var w=E.city;var u=E.district;var B=[j.id,j.cid,"",j.name,j.defaultId].join(",");var z=[w.id,w.cid,w.lesId,w.name,w.defaultId].join(",");var s=[u.id,u.cid,u.lesId,u.name].join(",");var t=j.id;var C=d(this.eles).find(".ui-city");var x=C.find(".ui-city-toggle");var D=d('<div class="ui-city-group"></div>');var m=d('<a name="item_none_dizhi_guanbi" class="ui-city-close" href="###"><i>></i><i><</i></a>');D.append(m);var A=d('<div class="ui-city-group-header"><p class="address-title">常用地址：</p></div>');var l=d('<p class="address-item"></p>');if(!!r.used&&!r.city){o.getUsedAddress(function(F){if(!F){return}d.each(F,function(I,H){if(I==0){return}if(H!=null){var G=H.province;var N=H.city;var L=H.district;var M=[G.id,G.cid,"",G.name,G.defaultId].join(",");var K=[N.id,N.cid,N.lesId,N.name,G.defaultId].join(",");var J=[L.id,L.cid,L.lesId,L.name].join(",");l.append(d('<a name="item_none_dizhi_chy0'+I+'" href="###"><span class="pr dn" role='+M+">"+G.name+'</span><span class="ct" role='+K+">"+N.name+'</span><span class="ds"  role='+J+">"+L.name+"</span></a>"))}});A.append(l);if(!!r.used&&!r.city&&F.length>1){D.prepend(A)}})}var n=d('<div class="ui-city-group-content"></div>');if(!r.city){var k=d('<ul class="nav-tabs clearfix"><li name="item_none_dizhi_02" id="provinceShow" class="active"  role='+B+'><p><a href="###">'+j.name+'</a><b class="arr"></b></p></li><li name="item_none_dizhi_03" id="citybShow" class="active"  role='+z+","+w.defaultId+'><p><a href="###">'+w.name+'</a><b class="arr"></b></p></li><li name="item_none_dizhi_04" id="districtShow" class="active current" role='+s+","+u.defaultId+'><p><a href="###">'+u.name+'</a><b class="arr"></b></p></li></ul>')}else{var k=d('<ul class="nav-tabs clearfix"><li name="item_none_dizhi_02" id="provinceShow" class="active" role='+B+'><p><a href="###">'+j.name+'</a><b class="arr"></b></p></li><li name="item_none_dizhi_03" id="citybShow" class="active current" role='+z+","+w.defaultId+'><p><a href="###">'+w.name+'</a><b class="arr"></b></p></li></ul>')}var y=d('<div class="tab-content"></div>');var q=d('<ul class="tab-panel pr-panel"></ul><ul class="tab-panel ct-panel"><li>正在加载中...</li></ul><ul class="tab-panel ds-panel active"><li></li></ul>');o.setInfo=o.getInfo;if(!!r.state){var p=d("<li></li>");q.eq(0).append(p);o.getProvinceList(function(F){d.each(F,function(H,G){var I=[G.id,G.cid,"",G.name,G.defaultId].join(",");if(G.id==o.getInfo.province.id){q.children(":eq(0)").append('<span><a name="item_none_dizhi_sheng" href="###" class="on" role='+I+">"+G.name+"</a></span>")}else{q.children(":eq(0)").append('<span><a name="item_none_dizhi_sheng" href="###" role='+I+">"+G.name+"</a></span>")}});y.append(q);o.getProvinces(C,l,x,y,k,q,A,D,function(){return o.getCities(k,y,q,C,x,function(){return o.getDistricts(k,y,x,C,function(){return o.setDetailAddress(x,k,y,C)})})})})}else{}n.append(k);n.append(y);D.append(n);C.append(D);d(v).append(C);o.closePanel();k.find("li").each(function(F){d(this).on("click",function(G){if(d(this).hasClass("active")){d(this).addClass("current").siblings().removeClass("current");y.children(":eq("+F+")").addClass("active").siblings().removeClass("active")}return false})});if(!!r.used&&!r.city){o.setAddressByUsed(l,x,C,q,y,k,A,D)}},getProvinces:function(n,r,k,s,t,m,l,q,o){var p=this;var j=this.opts;n.on("click",function(u){if(u){u.stopPropagation()}d(this).addClass("active");if(typeof r!==undefined){r.html("")}p.getUsedAddress(function(v){if(!v){return}d.each(v,function(y,x){if(y==0){return}var w=x.province;var D=x.city;var B=x.district;var C=[w.id,w.cid,"",w.name,w.defaultId].join(",");var A=[D.id,D.cid,D.lesId,D.name,w.defaultId].join(",");var z=[B.id,B.cid,B.lesId,B.name].join(",");r.append(d('<a name="item_none_dizhi_chy0'+y+'" href="###"><span class="pr dn" role='+C+">"+w.name+'</span><span class="ct" role='+A+">"+D.name+'</span><span class="ds"  role='+z+">"+B.name+"</span></a>"))});l.append(r);if(!!j.used&&!j.city&&v.length>1){q.prepend(l)}});if(!!j.used&&!j.city){p.setAddressByUsed(r,k,n,m,s,t,l,q)}return false});o()},setAddressByUsed:function(q,k,n,m,r,s,l,p){var o=this;var j=this.opts;n.off("click.setDefaultAddress").on("click.setDefaultAddress",".address-item a",function(u){if(u){u.stopPropagation()}var E=d(this).clone();var t=E.find(".pr").attr("role");var C=E.find(".ct").attr("role");var y=E.find(".ds").attr("role");var G=t.split(",");var v=C.split(",");var H=y.split(",");if(!/^10\,|^20\,|^30,|^320\,/.test(t)){E.find("span:hidden").removeClass("dn")}o.setInfo.province={id:G[0],cid:G[1],name:G[3]};o.setInfo.city={id:v[0],cid:v[1],lesId:v[2],name:v[3]};o.setInfo.district={id:H[0],cid:H[1],lesId:H[2],name:H[3]};k.find("em").html(E.children());n.removeClass("active");o.setDefaultAddress(o.setInfo,function(J){if(d.type(j.changeCb)=="function"){return j.changeCb(J)}});var x=o.getInfo;var w=x.province;var z=x.city;var I=x.district;var A=[w.id,w.cid,"",w.name,w.defaultId].join(",");var D=[z.id,z.cid,z.lesId,z.name,z.defaultId].join(",");var B=[I.id,I.cid,I.lesId,I.name,I.defaultId].join(",");if(!j.city){s.html('<li class="active"  role='+A+'><p><a href="###">'+w.name+'</a><b class="arr"></b></p></li><li class="active"  role='+D+'><p><a href="###">'+z.name+'</a><b class="arr"></b></p></li><li class="active current" role='+B+'><p><a href="###">'+I.name+'</a><b class="arr"></b></p></li>')}else{s.html('<li class="active" role='+A+'><p><a href="###">'+w.name+'</a><b class="arr"></b></p></li><li class="active current" role='+D+'><p><a href="###">'+z.name+'</a><b class="arr"></b></p></li>')}m.removeClass("active").eq(2).addClass("active");if(!!j.state){var F=d("<li></li>");m.eq(0).html("").append(F);o.getProvinceList(function(J){d.each(J,function(L,K){var M=[K.id,K.cid,"",K.name,K.defaultId].join(",");if(K.id==w.id){m.children(":eq(0)").append('<span><a name="item_none_dizhi_sheng" href="###" class="on" role='+M+">"+K.name+"</a></span>")}else{m.children(":eq(0)").append('<span><a name="item_none_dizhi_sheng" href="###" role='+M+">"+K.name+"</a></span>")}});r.append(m);o.getProvinces(n,q,k,r,s,m,l,p,function(){return o.getCities(s,r,m,n,k,function(){return o.getDistricts(s,r,k,n,function(){return o.setDetailAddress(k,s,r,n)})})})})}else{}s.find("li").each(function(J){d(this).on("click",function(K){if(d(this).hasClass("active")){d(this).addClass("current").siblings().removeClass("current");r.children(":eq("+J+")").addClass("active").siblings().removeClass("active")}return false})});return false})},getCities:function(u,t,l,m,k,n){var p=this;var j=this.opts;var o=t.find(".ct-panel li");var r=t.find(".ds-panel li");t.find(".pr-panel a").on("click",function(y){if(y){y.stopPropagation()}u.children(":eq(1)").find("a").html("请选择市").end().end().children(":eq(2)").removeClass("active").find("a").html("请选择县区");d(this).addClass("on").parent().siblings().find("a").removeClass("on");var A=d(this).attr("role");var w=A.split(",");p.setInfo.province={id:w[0],cid:w[1],name:w[3],lesId:w[2]};var v=w[0];var x=w[4];var z=d(this).text();o.html("");p.getCityById(v,function(C){d.each(C,function(G,F){var H=[F.id,F.cid,F.lesId,F.name,F.defaultId].join(",");if(F.id==p.getInfo.city.id){o.append('<span><a name="item_none_dizhi_shi" href="###" class="on" role='+H+">"+F.name+"</a></span>")}else{o.append('<span><a name="item_none_dizhi_shi" href="###" role='+H+">"+F.name+"</a></span>")}});n();if(C.length!==1){u.children(":eq(1)").addClass("active current");t.find(".pr-panel").removeClass("active").end().find(".ct-panel").addClass("active")}else{var E=v=="10"?"0100100":(v=="20"?"0210199":(v=="30"?"0220199":"0230157"));B("streetCode",E,365,true);function B(H,J,F,I){var G=new Date;G.setTime(G.getTime()+F*24*60*60*1000);if(I){document.cookie=H+"="+escape(J)+";path=/;domain="+sn.cookieDomain+";expires="+G}else{document.cookie=H+"="+escape(J)+";expires="+G}}if(!!j.city){m.removeClass("active")}var D=[C[0].id+","+C[0].cid+","+C[0].name+","+C[0].defaultId].join(",");u.children(":eq(1)").attr("role",D).find("a").text(z);p.setInfo.city={id:C[0].id,cid:C[0].cid,name:C[0].name,lesId:C[0].lesId};p.getDefaultDistrict(C[0].defaultId,function(F){p.setInfo.district={id:F.id,cid:F.cid,name:F.name,lesId:F.lesId};if(!!j.city){p.setDefaultAddress(p.setInfo,function(H){var I=k.find("span:eq(0)");var G=k.find("span:eq(1)");I.attr("role",p.setInfo.province.id+","+p.setInfo.province.cid+","+p.setInfo.province.name).text(p.setInfo.province.name);G.attr("role",p.setInfo.city.id+","+p.setInfo.city.cid+","+p.setInfo.city.name+","+p.setInfo.province.lesId).text(p.setInfo.city.name);I.text()==G.text()&&d.trim(I)!="吉林"?k.find(".pr").addClass("dn"):k.find(".pr").removeClass("dn")})}if(d.type(j.cityCb)=="function"){j.cityCb(p.getInfo)}u.children(":eq(1)").removeClass("active")})}});if(/^10\,|^20\,|^30,|^320\,/.test(v+",")){p.changeFlag=!!0;if(!j.city){u.children().eq(1).removeClass("active current").end().eq(2).addClass("current");t.find(".pr-panel").removeClass("active").end().find(".ds-panel").addClass("active");p.getDistrictsById(x,function(B){r.html("");d.each(B,function(D,C){var E=[C.id,C.cid,C.lesId,C.name,C.defaultId].join(",");r.append('<span><a href="###" role='+E+">"+C.name+"</a></span>")});if(d.type(j.cityCb)=="function"){j.cityCb(p.getInfo)}p.setDetailAddress(k,u,t,m)});u.children(":eq(0)").addClass("active").removeClass("current")}}else{u.children(":eq(0)").removeClass("current")}u.children(":eq(0)").attr("role",A).find("a").text(z);return false});var s=p.getInfo.province.id;var q=p.getInfo.city.id;p.getCityById(s,function(v){o.html("");d.each(v,function(x,w){var y=[w.id,w.cid,w.lesId,w.name,w.defaultId].join(",");if(w.id==p.getInfo.city.id){o.append('<span><a name="item_none_dizhi_shi" href="###" class="on" role='+y+">"+w.name+"</a></span>")}else{o.append('<span><a name="item_none_dizhi_shi" href="###" role='+y+">"+w.name+"</a></span>")}});if(v.length==1){u.children().eq(1).removeClass("active current");u.children().eq(2).addClass("current");t.find(".pr-panel").removeClass("active").end().find(".ds-panel").addClass("active")}else{u.children(":eq(1)").addClass("active")}if(!!j.city){if(v.length==1){u.children(":eq(0)").addClass("active current").siblings().removeClass("active current");t.children(":eq(0)").addClass("active").siblings().removeClass("active")}else{t.children(":eq(1)").addClass("active").siblings().removeClass("active")}}n()});p.getDistrictsById(q,function(v){r.html("");d.each(v,function(x,w){var y=[w.id,w.cid,w.lesId,w.name,w.defaultId].join(",");if(w.id==p.getInfo.district.id){r.append('<span><a name="item_none_dizhi_qu" href="###" class="on" role='+y+">"+w.name+"</a></span>")}else{r.append('<span><a name="item_none_dizhi_qu" href="###" role='+y+">"+w.name+"</a></span>")}});p.setDetailAddress(k,u,t,m)})},getDistricts:function(q,m,k,l,j){var o=this;var n=this.opts;var p=m.find(".ds-panel li");m.find(".ct-panel a").on("click",function(t){o.changeFlag=!!0;if(t){t.stopPropagation()}d(this).addClass("on").parent().siblings().find("a").removeClass("on");var w=d(this).attr("role");o.setInfo.city={id:w.split(",")[0],cid:w.split(",")[1],lesId:w.split(",")[2],name:w.split(",")[3]};var r=w.split(",")[0];var u=d(this).text();if(!n.city){q.children(":eq(2)").find("a").html("请选择县区");p.html("");o.getDistrictsById(r,function(x){d.each(x,function(z,y){var A=[y.id,y.cid,y.lesId,y.name,y.defaultId].join(",");if(y.id==o.getInfo.district.id){p.append('<span><a name="item_none_dizhi_qu" href="###" class="on" role='+A+">"+y.name+"</a></span>")}else{p.append('<span><a name="item_none_dizhi_qu" href="###" role='+A+">"+y.name+"</a></span>")}});j();if(d.type(n.cityCb)=="function"){n.cityCb(o.getInfo)}});m.find(".ct-panel").removeClass("active").end().find(".ds-panel").addClass("active");q.children(":eq(1)").addClass("active").removeClass("current").attr("role",w).find("a").text(u).end().end().children(":eq(2)").addClass("active current")}else{var v=w.split(",")[4];o.getDefaultDistrict(v,function(z){l.removeClass("active");o.setInfo.district={id:z.id,cid:z.cid,name:z.name,lesId:z.lesId};q.children(":eq(1)").attr("role",w).find("a").text(u);var A=q.find("a:eq(0)").text();var x=q.find("a:eq(1)").text();var y=o.setInfo.district.name;A==x&&d.trim(A)!="吉林"?k.find(".pr").addClass("dn"):k.find(".pr").removeClass("dn");k.find(".pr").text(A).end().find(".ct").text(x);o.setDefaultAddress(o.setInfo,function(D){var I=k.find("span:eq(0)");var C=k.find("span:eq(1)");var F=o.setInfo;var B=F.province;var H=F.city;var G=[B.id,B.cid,B.name,""].join(",");var E=[H.id,H.cid,H.name,"",H.lesId].join(",");I.attr("role",G).text(B.name).removeClass("dn");C.attr("role",E).text(H.name)});if(d.type(n.cityCb)=="function"){n.cityCb(o.getInfo)}})}s();function s(){var y=w.split(",")[1];d.ajax({url:"//ipservice.suning.com/ipQuery.do?cityId="+y,type:"GET",dataType:"jsonp",success:function(A){var z=A.streetLESId;x("streetCode",z,365,true)}});function x(B,D,z,C){var A=new Date;A.setTime(A.getTime()+z*24*60*60*1000);if(C){document.cookie=B+"="+escape(D)+";path=/;domain="+sn.cookieDomain+";expires="+A}else{document.cookie=B+"="+escape(D)+";expires="+A}}}return false})},setDetailAddress:function(j,o,l,k){var n=this;var m=this.opts;l.find(".ds-panel a").on("click",function(q){if(q){q.stopPropagation()}k.removeClass("active");d(this).addClass("on").parent().siblings().find("a").removeClass("on");var v=d(this).attr("role");var x=v.split(",");n.setInfo.district={id:x[0],cid:x[1],lesId:x[2],name:x[3]};var B=x[0];var D=d(this).text();var p=o.find("a:eq(0)").text();var z=o.find("a:eq(1)").text();var t=o.find("a:eq(2)").text();var s=n.getInfo;var r=s.province;var u=s.city;var C=s.district;var w=[r.id,r.cid,r.name].join(",");var A=[u.id,u.cid,u.name,"",u.lesId].join(",");var y=[C.id,C.cid,C.name,"",C.lesId].join(",");o.children(":eq(2)").attr("role",v).find("a").text(D);p==z&&d.trim(p)!="吉林"?j.find(".pr").addClass("dn"):j.find(".pr").removeClass("dn");j.find(".pr").attr("role",w).text(p).end().find(".ct").attr("role",A).text(z).end().find(".ds").attr("role",y).text(D);n.setDefaultAddress(n.setInfo,function(E){if(d.type(m.distCb)!="function"||d.type(m.changeCb)!="function"){return}if(n.changeFlag==false){m.changeCb(E);n.changeFlag=true}else{m.distCb(E)}});return false})},getAddressByDefault:function(j){ECity.API.getCity(function(k){return j(k)})},getUsedAddress:function(j){var k=ECity.API.getLastUsedCities();return j(k)},getProvinceList:function(j){ECity.API.getProvinceList(function(k){return j(k)})},getCityById:function(k,j){ECity.API.getCityList(k,function(l){return j(l)})},getDistrictsById:function(k,j){ECity.API.getDistrictList(k,function(l){return j(l)})},setDefaultAddress:function(k,j){ECity.API.setCity(k,function(l){return j(l)})},getDefaultDistrict:function(k,j){ECity.API.getDistrict(k,function(l){return j(l)})},getCity:function(k){var j=this;j.opts.getCity(k)},getInfoByCityid:function(k,j){ECity.API.getProvinceAndCityByCityId(k,function(m){var l=m.provinceAndCity;var n={};n.province={id:l.pMdmId,cid:l.pMdmId,name:l.pName};n.city={id:l.cMdmId,cid:l.cCommerceId,name:l.cName};n.district={id:"",cid:"",name:""};j(n)})}};window.mCity={};mCity.API={};mCity.API.getCity=function(j){ECity.API.getCity(function(k){return j(k)})};mCity.API.getCityId=function(){ECity.API.getCityId()};mCity.API.getDistrictId=function(){ECity.API.getDistrictId()};var c={city:false,state:true,used:true,cityCb:d.noop,distCb:d.noop,getCity:d.noop,changeCb:d.noop,cityId:""};var h=document.location.host;var e=document.location.hostname;var g=document.location.protocol;var b=document.location.port;var f="/ip-web";var a;if(/\.cnsuning\.com/ig.test(h)){if(h.indexOf("pre")!=-1){a=g+"//ipservicepre.cnsuning.com"}else{a=g+"//ipservicepre.cnsuning.com"}}else{if(/\.suning\.com/ig.test(h)){a=g+"//ipservice.suning.com"}else{a="http://localhost:8080/ip-web"}}d.fn.mCity=function(j){var k=this;try{ECity.API.init(j.city?j.city:c.city)}catch(l){}return k.each(function(){var m=d.extend({},c,j);i().init(this,m)})}})(jQuery);var sa=sa||{};!function(t){var e=function(t){function e(t){var e;return!0===t&&(e=[n(),o("idsLoginUserIdLastTime"),o("custno"),u()].join("|")+"|",a=e),a}function n(){return t.pvId||(t.pvId=i()),t.pvId}function u(){var t=o("_snma");return void 0===t?r():t.split("|")[1]}function r(){var t=new Date,e=new Date,n=document.location.hostname,u=i();e.setTime(e.getTime()+63072e6);var r="_snma="+escape("1|"+u+"|"+t.getTime()+"|"+t.getTime()+"|"+t.getTime()+"|0|0")+";expires="+e.toGMTString()+";path=/";return n.indexOf(".suning.com")>-1?r+=";domain=.suning.com":n.indexOf(".cnsuning.com")>-1?r+=";domain=.cnsuning.com":n.indexOf(".manzuo.com")>-1?r+=";domain=.manzuo.com":r+=";domain="+location.hostname,document.cookie=r,u}function o(t){for(var e=document.cookie.split("; "),n=0;n<e.length;n++){var u=e[n].split("=");if(u[0]===t)return decodeURIComponent(u[1]?u[1]:"-")}}function i(){var t=new Date,e=Math.round(1e5*Math.random());return t.getTime().toString().concat(e)}var a=e(!0);return{"getIds":e}}(sa),n=function(n){var u=function(t){return t.replace("{ids}",e.getIds())},r=function(e,n){return u("//click.suning.cn/sa/ajaxCustom.gif?cust=magina|{key}|{value}&ids={ids}&r=||||".replace("{key}",t.encodeURIComponent(e)).replace("{value}",t.encodeURIComponent(n)))},o=function(t,e){var n=new Image;n.onerror=n.onload=function(){n.onerror=n.onload=null,n=null},n.src=r(t,e)};return function(t,e){try{o(t,e)}catch(t){}}}();!function(t){var e=function(t,e){n(t,e)};t.stringifyMetrics(function(t,n,u){e("mt",n)})}(function(t){function e(u){if(n[u])return n[u].exports;var r=n[u]={"i":u,"l":!1,"exports":{}};return t[u].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,u){e.o(t,n)||Object.defineProperty(t,n,{"configurable":!1,"enumerable":!0,"get":u})},e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=6)}([function(e,n,u){"use strict";n.__esModule=!0,n["default"]=t},function(t,e,n){"use strict";e.__esModule=!0,e["default"]=function(){return"undefined"}},function(t,e,n){"use strict";e.__esModule=!0,e.encode=function(t){return u["default"].encodeURIComponent(t)},e.decode=function(t){return u["default"].decodeURIComponent(t)};var u=function(t){return t&&t.__esModule?t:{"default":t}}(n(0))},function(t,e,n){"use strict";e.__esModule=!0;var u=n(2),r=[],o=function(){return r.length=0,this},i={"add":function(t){return r.push(t),this},"empty":function(){return o.call(this)},"reset":function(){return o.call(this)},"stringify":function(){for(var t=[],e=0,n=r.length;e<n;e++)t.push(r[e][1]);return t.join("|")},"format":function(){for(var t=[],e=0,n=r.length;e<n;e++)t.push((0,u.decode)(r[e][1]));return t.join("\n")}};e["default"]=i},function(t,e){var n={"utf8":{"stringToBytes":function(t){return n.bin.stringToBytes(unescape(encodeURIComponent(t)))},"bytesToString":function(t){return decodeURIComponent(escape(n.bin.bytesToString(t)))}},"bin":{"stringToBytes":function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},"bytesToString":function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};t.exports=n},function(t,e,n){"use strict";e.__esModule=!0,e.encode=function(t){return u.btoa(t)},e.decode=function(t){return u.atob(t)};var u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}(n(30))},function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0,e.addEvents=e.b64=e.stringifyMetrics=void 0;var r=u(n(7)),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}(n(5)),i=u(n(31)),a=u(n(32));(0,r["default"])(),e.stringifyMetrics=i["default"],e.b64=function(t){return o.encode(t)},e.addEvents=a["default"]},function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0,e["default"]=function(){r["default"].add(["UA",(0,o.encode)((0,i["default"])())]),r["default"].add(["Platform",(0,a["default"])()]),r["default"].add(["TimezoneOffset",(0,d["default"])()]),r["default"].add(["Vendor",(0,f["default"])()]),r["default"].add(["ActiveXObject",(0,c["default"])()]),r["default"].add(["CpuClass",(0,s["default"])()]),r["default"].add(["Oscpu",(0,v["default"])()]),r["default"].add(["Safari",(0,_["default"])()]),r["default"].add(["CanvasFingerprints",(0,l["default"])()]),r["default"].add(["DocHidden",(0,g["default"])()]),r["default"].add(["DocVisibleState",(0,h["default"])()]),r["default"].add(["Size",(0,p["default"])()]),r["default"].add(["Product",(0,m["default"])()]),r["default"].add(["ProductSub",(0,y["default"])()]),r["default"].add(["BuildID",(0,M["default"])()]),r["default"].add(["PluginNames",(0,b["default"])()]),r["default"].add(["StackTrace",(0,T["default"])()]),r["default"].add(["EvalLen",(0,S["default"])()])};var r=u(n(3)),o=n(2),i=u(n(8)),a=u(n(9)),f=u(n(10)),d=u(n(11)),l=u(n(12)),c=u(n(17)),s=u(n(18)),v=u(n(19)),_=u(n(20)),g=u(n(21)),h=u(n(22)),p=u(n(23)),m=u(n(24)),y=u(n(25)),M=u(n(26)),b=u(n(27)),T=u(n(28)),S=u(n(29))},function(t,e,n){"use strict";e.__esModule=!0;var u=function(t){return t&&t.__esModule?t:{"default":t}}(n(0));e["default"]=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:u["default"].navigator.userAgent}},function(t,e,n){"use strict";e.__esModule=!0;var u=function(t){return t&&t.__esModule?t:{"default":t}}(n(0));e["default"]=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:u["default"].navigator.platform}},function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=u(n(0)),o=u(n(1));e["default"]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r["default"].navigator.vendor;return"string"==typeof t?t:(0,o["default"])()}},function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=u(n(0)),o=u(n(1));e["default"]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r["default"].Date;try{var e=t.getTimezoneOffset();if(void 0!==e)return e}catch(t){}return(0,o["default"])()}},function(e,n,u){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}n.__esModule=!0;var o=r(u(0)),i=r(u(13)),a=r(u(1)),f=function(){try{var e=o["default"].document.createElement("canvas"),n=e.getContext("2d"),u="Suning Fingerprints/Canvas 1.0";return n.textBaseline="top",n.font="14px 'Arial'",n.textBaseline="alphabetic",n.fillStyle="#f60",n.fillRect(125,1,62,20),n.fillStyle="#069",n.fillText(u,2,15),n.fillStyle="rgba(102, 204, 0, 0.7)",n.fillText(u,4,17),e}catch(e){return t.console,null}};n["default"]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f();try{return(0,i["default"])(t.toDataURL())}catch(t){return(0,a["default"])()}}},function(t,e,n){"use strict";e.__esModule=!0;var u=function(t){return t&&t.__esModule?t:{"default":t}}(n(14));e["default"]=function(t){return(0,u["default"])(t)}},function(t,e,n){!function(){var e=n(15),u=n(4).utf8,r=n(16),o=n(4).bin,i=function(t,n){t.constructor==String?t=n&&"binary"===n.encoding?o.stringToBytes(t):u.stringToBytes(t):r(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());for(var a=e.bytesToWords(t),f=8*t.length,d=1732584193,l=-271733879,c=-1732584194,s=271733878,v=0;v<a.length;v++)a[v]=16711935&(a[v]<<8|a[v]>>>24)|4278255360&(a[v]<<24|a[v]>>>8);a[f>>>5]|=128<<f%32,a[14+(f+64>>>9<<4)]=f;for(var _=i._ff,g=i._gg,h=i._hh,p=i._ii,v=0;v<a.length;v+=16){var m=d,y=l,M=c,b=s;l=p(l=p(l=p(l=p(l=h(l=h(l=h(l=h(l=g(l=g(l=g(l=g(l=_(l=_(l=_(l=_(l,c=_(c,s=_(s,d=_(d,l,c,s,a[v+0],7,-680876936),l,c,a[v+1],12,-389564586),d,l,a[v+2],17,606105819),s,d,a[v+3],22,-1044525330),c=_(c,s=_(s,d=_(d,l,c,s,a[v+4],7,-176418897),l,c,a[v+5],12,1200080426),d,l,a[v+6],17,-1473231341),s,d,a[v+7],22,-45705983),c=_(c,s=_(s,d=_(d,l,c,s,a[v+8],7,1770035416),l,c,a[v+9],12,-1958414417),d,l,a[v+10],17,-42063),s,d,a[v+11],22,-1990404162),c=_(c,s=_(s,d=_(d,l,c,s,a[v+12],7,1804603682),l,c,a[v+13],12,-40341101),d,l,a[v+14],17,-1502002290),s,d,a[v+15],22,1236535329),c=g(c,s=g(s,d=g(d,l,c,s,a[v+1],5,-165796510),l,c,a[v+6],9,-1069501632),d,l,a[v+11],14,643717713),s,d,a[v+0],20,-373897302),c=g(c,s=g(s,d=g(d,l,c,s,a[v+5],5,-701558691),l,c,a[v+10],9,38016083),d,l,a[v+15],14,-660478335),s,d,a[v+4],20,-405537848),c=g(c,s=g(s,d=g(d,l,c,s,a[v+9],5,568446438),l,c,a[v+14],9,-1019803690),d,l,a[v+3],14,-187363961),s,d,a[v+8],20,1163531501),c=g(c,s=g(s,d=g(d,l,c,s,a[v+13],5,-1444681467),l,c,a[v+2],9,-51403784),d,l,a[v+7],14,1735328473),s,d,a[v+12],20,-1926607734),c=h(c,s=h(s,d=h(d,l,c,s,a[v+5],4,-378558),l,c,a[v+8],11,-2022574463),d,l,a[v+11],16,1839030562),s,d,a[v+14],23,-35309556),c=h(c,s=h(s,d=h(d,l,c,s,a[v+1],4,-1530992060),l,c,a[v+4],11,1272893353),d,l,a[v+7],16,-155497632),s,d,a[v+10],23,-1094730640),c=h(c,s=h(s,d=h(d,l,c,s,a[v+13],4,681279174),l,c,a[v+0],11,-358537222),d,l,a[v+3],16,-722521979),s,d,a[v+6],23,76029189),c=h(c,s=h(s,d=h(d,l,c,s,a[v+9],4,-640364487),l,c,a[v+12],11,-421815835),d,l,a[v+15],16,530742520),s,d,a[v+2],23,-995338651),c=p(c,s=p(s,d=p(d,l,c,s,a[v+0],6,-198630844),l,c,a[v+7],10,1126891415),d,l,a[v+14],15,-1416354905),s,d,a[v+5],21,-57434055),c=p(c,s=p(s,d=p(d,l,c,s,a[v+12],6,1700485571),l,c,a[v+3],10,-1894986606),d,l,a[v+10],15,-1051523),s,d,a[v+1],21,-2054922799),c=p(c,s=p(s,d=p(d,l,c,s,a[v+8],6,1873313359),l,c,a[v+15],10,-30611744),d,l,a[v+6],15,-1560198380),s,d,a[v+13],21,1309151649),c=p(c,s=p(s,d=p(d,l,c,s,a[v+4],6,-145523070),l,c,a[v+11],10,-1120210379),d,l,a[v+2],15,718787259),s,d,a[v+9],21,-343485551),d=d+m>>>0,l=l+y>>>0,c=c+M>>>0,s=s+b>>>0}return e.endian([d,l,c,s])};i._ff=function(t,e,n,u,r,o,i){var a=t+(e&n|~e&u)+(r>>>0)+i;return(a<<o|a>>>32-o)+e},i._gg=function(t,e,n,u,r,o,i){var a=t+(e&u|n&~u)+(r>>>0)+i;return(a<<o|a>>>32-o)+e},i._hh=function(t,e,n,u,r,o,i){var a=t+(e^n^u)+(r>>>0)+i;return(a<<o|a>>>32-o)+e},i._ii=function(t,e,n,u,r,o,i){var a=t+(n^(e|~u))+(r>>>0)+i;return(a<<o|a>>>32-o)+e},i._blocksize=16,i._digestsize=16,t.exports=function(t,n){if(void 0===t||null===t)throw new Error("Illegal argument "+t);var u=e.wordsToBytes(i(t,n));return n&&n.asBytes?u:n&&n.asString?o.bytesToString(u):e.bytesToHex(u)}}()},function(t,e){!function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={"rotl":function(t,e){return t<<e|t>>>32-e},"rotr":function(t,e){return t<<32-e|t>>>e},"endian":function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},"randomBytes":function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},"bytesToWords":function(t){for(var e=[],n=0,u=0;n<t.length;n++,u+=8)e[u>>>5]|=t[n]<<24-u%32;return e},"wordsToBytes":function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},"bytesToHex":function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},"hexToBytes":function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},"bytesToBase64":function(t){for(var n=[],u=0;u<t.length;u+=3)for(var r=t[u]<<16|t[u+1]<<8|t[u+2],o=0;o<4;o++)8*u+6*o<=8*t.length?n.push(e.charAt(r>>>6*(3-o)&63)):n.push("=");return n.join("")},"base64ToBytes":function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],u=0,r=0;u<t.length;r=++u%4)0!=r&&n.push((e.indexOf(t.charAt(u-1))&Math.pow(2,-2*r+8)-1)<<2*r|e.indexOf(t.charAt(u))>>>6-2*r);return n}};t.exports=n}()},function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function u(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}t.exports=function(t){return null!=t&&(n(t)||u(t)||!!t._isBuffer)}},function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=u(n(0)),o=u(n(1));e["default"]=function(){return void 0!==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:r["default"].ActiveXObject)||(0,o["default"])()}},function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=u(n(0)),o=u(n(1));e["default"]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r["default"].navigator.cpuClass;return void 0===t?(0,o["default"])():t}},function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=u(n(0)),o=u(n(1));e["default"]=function(){return void 0===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:r["default"].navigator.oscpu)?(0,o["default"])():r["default"].navigator.oscpu}},function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=u(n(0)),o=u(n(1));e["default"]=function(){return void 0!==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:r["default"].safari)||(0,o["default"])()}},function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=u(n(0)),o=u(n(1)),i=r["default"].document,a=function(){var t=["webkit","moz","ms","o"];if("hidden"in i)return i.hidden;for(var e=0;e<t.length;e++)if(t[e]+"Hidden"in i)return i[t[e]+"Hidden"];return null};e["default"]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a();return null===t?(0,o["default"])():t}},function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=u(n(0)),o=u(n(1)),i=r["default"].document,a=function(){var t=["webkit","moz","ms","o"];if("visibilityState"in i)return i.visibilityState;for(var e=0;e<t.length;e++)if(t[e]+"VisibilityState"in i)return i[t[e]+"VisibilityState"];return null};e["default"]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a();return t||(0,o["default"])()}},function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=u(n(0)),o=u(n(1)),i=r["default"].document,a=r["default"].screen,f=function(){return[a.width,a.height]},d=function(){try{return[i.body.clientWidth,i.body.clientHeight]}catch(t){return[(0,o["default"])(),(0,o["default"])()]}},l=function(){try{return[i.body.scrollWidth,i.body.scrollHeight]}catch(t){return[(0,o["default"])(),(0,o["default"])()]}},c=function(){return[a.availWidth,a.availHeight]},s=function(){return[d().join("x"),l().join("x"),f().join("x"),c().join("x")].join(",")};e["default"]=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:s()}},function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=u(n(0)),o=u(n(1));e["default"]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r["default"].navigator.product;return void 0===t?(0,o["default"])():t}},function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=u(n(0)),o=u(n(1));e["default"]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r["default"].navigator.productSub;return void 0===t?(0,o["default"])():t}},function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=u(n(0)),o=u(n(1));e["default"]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r["default"].navigator.buildID;return void 0===t?(0,o["default"])():t}},function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=u(n(0)),o=u(n(1)),i=n(2),a=function(t){for(var e=void 0,n=[],u=0,r=t.length;u<r;u++)e=t[u],n.push((0,i.encode)(e.name));return n.join(",")};e["default"]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r["default"].navigator.plugins;return void 0===t?(0,o["default"])():a(t)}},function(t,e,n){"use strict";e.__esModule=!0;var u=function(t){return t&&t.__esModule?t:{"default":t}}(n(1)),r=n(2),o=function(t){return t.stack?(0,r.encode)(t.stack.toString()):(0,r.encode)([t.name,t.message||t.description].join(":"))},i=function(){try{null[0]()}catch(t){return o(t)}return(0,u["default"])()};e["default"]=function(){return i()}},function(t,e,n){"use strict";e.__esModule=!0;var u=function(t){return t&&t.__esModule?t:{"default":t}}(n(0));e["default"]=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:u["default"].eval).toString().length}},function(t,e,n){!function(){function t(t){this.message=t}var n=e,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";(t.prototype=new Error).name="InvalidCharacterError",n.btoa||(n.btoa=function(e){for(var n,r,o=String(e),i=0,a=u,f="";o.charAt(0|i)||(a="=",i%1);f+=a.charAt(63&n>>8-i%1*8)){if((r=o.charCodeAt(i+=.75))>255)throw new t("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");n=n<<8|r}return f}),n.atob||(n.atob=function(e){var n=String(e).replace(/[=]+$/,"");if(n.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,o,i=0,a=0,f="";o=n.charAt(a++);~o&&(r=i%4?64*r+o:o,i++%4)?f+=String.fromCharCode(255&r>>(-2*i&6)):0)o=u.indexOf(o);return f})}()},function(t,e,n){"use strict";e.__esModule=!0,e["default"]=function(t){var e=u["default"].stringify(),n=[e,r.encode(e),u["default"].format()];return t?t.apply(null,n):n};var u=function(t){return t&&t.__esModule?t:{"default":t}}(n(3)),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}(n(5))},function(t,e,n){"use strict";e.__esModule=!0,e["default"]=function(t){var e=void 0;t=t||{};try{return o(u["default"].document,"mousewheel",t),o(u["default"].document,"mousedown",t),o(u["default"].document,"keydown",t),u["default"].addEventListener&&(r(u["default"].document,"touchstart",t),r(u["default"].document,"touchmove",t),r(u["default"].document,"touchend",t),r(u["default"].document,"touchcancel",t)),!0}catch(t){u["default"].console,e=t}return t.fail(e),!1};var u=function(t){return t&&t.__esModule?t:{"default":t}}(n(0)),r=function(t,e,n){if(n){var u=n[e]||n["succ"];if(u)return t.addEventListener(e,u,!1),!0}return!1},o=function(t,e,n){if(n){var u=n[e]||n["succ"];if(u&&t.addEventListener)return t.addEventListener(e,u,!1),!0;if(u&&t.attachEvent)return t.attachEvent("on"+e,u),!0}return!1}}]))}(this);!function(){var e,t,r,n,o,i,a,s,c,u,d,f,p,l,m,h,v,y;window._snBusError={CryptoJS:null},e=_snBusError,t=function(){var d,r,e,t,n,f,o,i,a,s,c,u,p=p||(d=Math,r=Object.create||function(){function r(){}return function(e){var t;return r.prototype=e,t=new r,r.prototype=null,t}}(),t=(e={}).lib={},n=t.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},f=t.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||i).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,o=e.sigBytes;if(this.clamp(),n%4)for(var i=0;i<o;i++){var a=r[i>>>2]>>>24-i%4*8&255;t[n+i>>>2]|=a<<24-(n+i)%4*8}else for(i=0;i<o;i+=4)t[n+i>>>2]=r[i>>>2];return this.sigBytes+=o,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=d.ceil(t/4)},clone:function(){var e=n.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t,r=[],n=function(t){t=t;var r=987654321,n=4294967295;return function(){var e=((r=36969*(65535&r)+(r>>16)&n)<<16)+(t=18e3*(65535&t)+(t>>16)&n)&n;return e/=4294967296,(e+=.5)*(.5<d.random()?1:-1)}},o=0;o<e;o+=4){var i=n(4294967296*(t||d.random()));t=987654071*i(),r.push(4294967296*i()|0)}return new f.init(r,e)}}),o=e.enc={},i=o.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],o=0;o<r;o++){var i=t[o>>>2]>>>24-o%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new f.init(r,t/2)}},a=o.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],o=0;o<r;o++){var i=t[o>>>2]>>>24-o%4*8&255;n.push(String.fromCharCode(i))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new f.init(r,t)}},s=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(a.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return a.parse(unescape(encodeURIComponent(e)))}},c=t.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=s.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,r=t.words,n=t.sigBytes,o=this.blockSize,i=n/(4*o),a=(i=e?d.ceil(i):d.max((0|i)-this._minBufferSize,0))*o,s=d.min(4*a,n);if(a){for(var c=0;c<a;c+=o)this._doProcessBlock(r,c);var u=r.splice(0,a);t.sigBytes-=s}return new f.init(u,s)},clone:function(){var e=n.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),t.Hasher=c.extend({cfg:n.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(r){return function(e,t){return new r.init(t).finalize(e)}},_createHmacHelper:function(r){return function(e,t){return new u.HMAC.init(r,t).finalize(e)}}}),u=e.algo={},e);return p},"object"==typeof exports?module.exports=exports=t():"function"==typeof define&&define.amd?define([],t):e.CryptoJS=t(),r=_snBusError,n=function(e){return r=(t=e).lib,n=r.Base,d=r.WordArray,o=t.algo,i=o.MD5,a=o.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:i,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,n=r.hasher.create(),o=d.create(),i=o.words,a=r.keySize,s=r.iterations;i.length<a;){c&&n.update(c);var c=n.update(e).finalize(t);n.reset();for(var u=1;u<s;u++)c=n.finalize(c),n.reset();o.concat(c)}return o.sigBytes=4*a,o}}),t.EvpKDF=function(e,t,r){return a.create(r).compute(e,t)},e.EvpKDF;var t,r,n,d,o,i,a},"object"==typeof exports?module.exports=exports=n(require("./core.min"),require("./sha1.min"),require("./hmac.min")):"function"==typeof define&&define.amd?define(["./core.min","./sha1.min","./hmac.min"],n):n(r.CryptoJS),o=_snBusError,i=function(e){return c=(t=e).lib.WordArray,t.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp();for(var o=[],i=0;i<r;i+=3)for(var a=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;s<4&&i+.75*s<r;s++)o.push(n.charAt(a>>>6*(3-s)&63));var c=n.charAt(64);if(c)for(;o.length%4;)o.push(c);return o.join("")},parse:function(e){var t=e.length,r=this._map,n=this._reverseMap;if(!n){n=this._reverseMap=[];for(var o=0;o<r.length;o++)n[r.charCodeAt(o)]=o}var i=r.charAt(64);if(i){var a=e.indexOf(i);-1!==a&&(t=a)}return function(e,t,r){for(var n=[],o=0,i=0;i<t;i++)if(i%4){var a=r[e.charCodeAt(i-1)]<<i%4*2,s=r[e.charCodeAt(i)]>>>6-i%4*2;n[o>>>2]|=(a|s)<<24-o%4*8,o++}return c.create(n,o)}(e,t,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.enc.Base64;var t,c},"object"==typeof exports?module.exports=exports=i(require("./core.min")):"function"==typeof define&&define.amd?define(["./core.min"],i):i(o.CryptoJS),a=_snBusError,s=function(e){var t,r,n,c,o,i,a,s,u,d,f,p,l,m,h,v,y,g;e.lib.Cipher||(r=(t=e).lib,n=r.Base,c=r.WordArray,o=r.BufferedBlockAlgorithm,(i=t.enc).Utf8,a=i.Base64,s=t.algo.EvpKDF,u=r.Cipher=o.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function o(e){return"string"==typeof e?g:v}return function(n){return{encrypt:function(e,t,r){return o(t).encrypt(n,e,t,r)},decrypt:function(e,t,r){return o(t).decrypt(n,e,t,r)}}}}()}),r.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),d=t.mode={},f=r.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=d.CBC=function(){function i(e,t,r){var n=this._iv;if(n){var o=n;this._iv=void 0}else o=this._prevBlock;for(var i=0;i<r;i++)e[t+i]^=o[i]}var e=f.extend();return e.Encryptor=e.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize;i.call(this,e,t,n),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}),e.Decryptor=e.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,o=e.slice(t,t+n);r.decryptBlock(e,t),i.call(this,e,t,n),this._prevBlock=o}}),e}(),l=(t.pad={}).Pkcs7={pad:function(e,t){for(var r=4*t,n=r-e.sigBytes%r,o=n<<24|n<<16|n<<8|n,i=[],a=0;a<n;a+=4)i.push(o);var s=c.create(i,n);e.concat(s)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},r.BlockCipher=u.extend({cfg:u.cfg.extend({mode:p,padding:l}),reset:function(){u.reset.call(this);var e=this.cfg,t=e.iv,r=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=r.createEncryptor;else{n=r.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==n?this._mode.init(this,t&&t.words):(this._mode=n.call(r,this,t&&t.words),this._mode.__creator=n)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else{t=this._process(!0);e.unpad(t)}return t},blockSize:4}),m=r.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),h=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,r=e.salt;if(r)var n=c.create([1398893684,1701076831]).concat(r).concat(t);else n=t;return n.toString(a)},parse:function(e){var t=a.parse(e),r=t.words;if(1398893684==r[0]&&1701076831==r[1]){var n=c.create(r.slice(2,4));r.splice(0,4),t.sigBytes-=16}return m.create({ciphertext:t,salt:n})}},v=r.SerializableCipher=n.extend({cfg:n.extend({format:h}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var o=e.createEncryptor(r,n),i=o.finalize(t),a=o.cfg;return m.create({ciphertext:i,key:r,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(r,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),y=(t.kdf={}).OpenSSL={execute:function(e,t,r,n){n||(n=c.random(8));var o=s.create({keySize:t+r}).compute(e,n),i=c.create(o.words.slice(t),4*r);return o.sigBytes=4*t,m.create({key:o,iv:i,salt:n})}},g=r.PasswordBasedCipher=v.extend({cfg:v.cfg.extend({kdf:y}),encrypt:function(e,t,r,n){var o=(n=this.cfg.extend(n)).kdf.execute(r,e.keySize,e.ivSize);n.iv=o.iv;var i=v.encrypt.call(this,e,t,o.key,n);return i.mixIn(o),i},decrypt:function(e,t,r,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var o=n.kdf.execute(r,e.keySize,e.ivSize,t.salt);return n.iv=o.iv,v.decrypt.call(this,e,t,o.key,n)}}))},"object"==typeof exports?module.exports=exports=s(require("./core.min"),require("./evpkdf.min")):"function"==typeof define&&define.amd?define(["./core.min","./evpkdf.min"],s):s(a.CryptoJS),c=_snBusError,u=function(e){var t,r,u;r=(t=e).lib.Base,u=t.enc.Utf8,t.algo.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=u.parse(t));var r=e.blockSize,n=4*r;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),i=this._iKey=t.clone(),a=o.words,s=i.words,c=0;c<r;c++)a[c]^=1549556828,s[c]^=909522486;o.sigBytes=i.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,r=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(r))}})},"object"==typeof exports?module.exports=exports=u(require("./core.min")):"function"==typeof define&&define.amd?define(["./core.min"],u):u(c.CryptoJS),d=_snBusError,f=function(e){return e.mode.ECB=((t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t),e.mode.ECB;var t},"object"==typeof exports?module.exports=exports=f(require("./core.min"),require("./cipher-core.min")):"function"==typeof define&&define.amd?define(["./core.min","./cipher-core.min"],f):f(d.CryptoJS),p=_snBusError,l=function(e){return e.pad.Pkcs7},"object"==typeof exports?module.exports=exports=l(require("./core.min"),require("./cipher-core.min")):"function"==typeof define&&define.amd?define(["./core.min","./cipher-core.min"],l):l(p.CryptoJS),m=_snBusError,h=function(o){return function(){var e=o,t=e.lib.BlockCipher,r=e.algo,u=[],d=[],f=[],p=[],l=[],m=[],h=[],v=[],y=[],g=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var r=0,n=0;for(t=0;t<256;t++){var o=n^n<<1^n<<2^n<<3^n<<4;o=o>>>8^255&o^99,u[r]=o;var i=e[d[o]=r],a=e[i],s=e[a],c=257*e[o]^16843008*o;f[r]=c<<24|c>>>8,p[r]=c<<16|c>>>16,l[r]=c<<8|c>>>24,m[r]=c;c=16843009*s^65537*a^257*i^16843008*r;h[o]=c<<24|c>>>8,v[o]=c<<16|c>>>16,y[o]=c<<8|c>>>24,g[o]=c,r?(r=i^e[e[e[s^i]]],n^=e[e[n]]):r=n=1}}();var w=[0,1,2,4,8,16,32,64,128,27,54],n=r.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4,n=4*((this._nRounds=r+6)+1),o=this._keySchedule=[],i=0;i<n;i++)if(i<r)o[i]=t[i];else{var a=o[i-1];i%r?6<r&&i%r==4&&(a=u[a>>>24]<<24|u[a>>>16&255]<<16|u[a>>>8&255]<<8|u[255&a]):(a=u[(a=a<<8|a>>>24)>>>24]<<24|u[a>>>16&255]<<16|u[a>>>8&255]<<8|u[255&a],a^=w[i/r|0]<<24),o[i]=o[i-r]^a}for(var s=this._invKeySchedule=[],c=0;c<n;c++){i=n-c;if(c%4)a=o[i];else a=o[i-4];s[c]=c<4||i<=4?a:h[u[a>>>24]]^v[u[a>>>16&255]]^y[u[a>>>8&255]]^g[u[255&a]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,f,p,l,m,u)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,h,v,y,g,d);r=e[t+1];e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,o,i,a,s){for(var c=this._nRounds,u=e[t]^r[0],d=e[t+1]^r[1],f=e[t+2]^r[2],p=e[t+3]^r[3],l=4,m=1;m<c;m++){var h=n[u>>>24]^o[d>>>16&255]^i[f>>>8&255]^a[255&p]^r[l++],v=n[d>>>24]^o[f>>>16&255]^i[p>>>8&255]^a[255&u]^r[l++],y=n[f>>>24]^o[p>>>16&255]^i[u>>>8&255]^a[255&d]^r[l++],g=n[p>>>24]^o[u>>>16&255]^i[d>>>8&255]^a[255&f]^r[l++];u=h,d=v,f=y,p=g}h=(s[u>>>24]<<24|s[d>>>16&255]<<16|s[f>>>8&255]<<8|s[255&p])^r[l++],v=(s[d>>>24]<<24|s[f>>>16&255]<<16|s[p>>>8&255]<<8|s[255&u])^r[l++],y=(s[f>>>24]<<24|s[p>>>16&255]<<16|s[u>>>8&255]<<8|s[255&d])^r[l++],g=(s[p>>>24]<<24|s[u>>>16&255]<<16|s[d>>>8&255]<<8|s[255&f])^r[l++];e[t]=h,e[t+1]=v,e[t+2]=y,e[t+3]=g},keySize:8});e.AES=t._createHelper(n)}(),o.AES},"object"==typeof exports?module.exports=exports=h(require("./core.min"),require("./enc-base64.min"),require("./md5.min"),require("./evpkdf.min"),require("./cipher-core.min")):"function"==typeof define&&define.amd?define(["./core.min","./enc-base64.min","./md5.min","./evpkdf.min","./cipher-core.min"],h):h(m.CryptoJS),v=_snBusError,y=function(e){return e.enc.Utf8},"object"==typeof exports?module.exports=exports=y(require("./core.min")):"function"==typeof define&&define.amd?define(["./core.min"],y):y(v.CryptoJS);var g=window.performance?window.performance:window.Performance,w=navigator.userAgent,S=new Function("return!+[1,]")(),E="_SN_DATA",_="SN_SESSION_ID",T="SN_DISTINCT_ID",x="SN_CITY_INFO",B="custno",k=null,C=[],b=[],I=[],L=null,P=null,M=null,R=null,z=2e3,A=null,D=1e4,q=!1,N=null,j=ve(),O={},F=[],J=0,U=ve(),W=!1,H="dcbpm.suning.cn",K="/dc-web/performance.gif",X="/dc-web/resource.gif",$="/dc-web/xhr.gif",Q="/dc-web/error.gif",V="ipservice.suning.com/ipQuery.do",Y={},G={navigationStart:"navigationStart",unloadEventStart:"unloadEventStart",unloadEventEnd:"unloadEventEnd",redirectStart:"redirectStart",redirectEnd:"redirectEnd",fetchStart:"fetchStart",domainLookupStart:"domainLookupStart",domainLookupEnd:"domainLookupEnd",connectStart:"connectStart",connectEnd:"connectEnd",secureConnectionStart:"secureConnectionStart",requestStart:"requestStart",responseStart:"responseStart",responseEnd:"responseEnd",domLoading:"domLoading",domInteractive:"domInteractive",domContentLoadedEventStart:"domContentLoadedEventStart",domContentLoadedEventEnd:"domContentLoadedEventEnd",domComplete:"domComplete",loadEventStart:"loadEventStart",loadEventEnd:"loadEventEnd"},Z="";function ee(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}Z=e()+"-"+e()+e()}var te,re,ne,oe=function(){var t=!1;try{window.localStorage&&window.localStorage.setItem(Z,Z),window.localStorage&&window.localStorage.removeItem(Z),t=!0}catch(e){t=!1}return t}();try{window.history.pushState=(te=window.history,ne=te[re="pushState"],function(){var e=ne.apply(this,arguments),t=new Event(re);return t.arguments=arguments,window.dispatchEvent(t),e})}catch(e){}function ie(e,t,r){if(void 0===t){var n=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),i=0;i<o.length;i++){var a=ce(o[i]);if(a.substring(0,e.length+1)===e+"="){n=he(a.substring(e.length+1));break}}return n}r=r||{},null===t&&(t="",r.expires=-1);var s,c="";r.expires&&("number"==typeof r.expires||r.expires.toUTCString)&&("number"==typeof r.expires?(s=new Date).setTime(s.getTime()+24*r.expires*60*60*1e3):s=r.expires,c="; expires="+s.toUTCString());var u=r.path?"; path="+r.path:"",d=r.domain?"; domain="+r.domain:"",f=r.secure?"; secure":"";document.cookie=[e,"=",me(t),c,u,d,f].join("")}function ae(e){var t={};try{if(window.JSON)t=JSON.parse(e);else{t=new Function("return"+e)}}catch(e){}return t}function se(e){var t="";try{t=window.JSON?JSON.stringify(e):function e(t){switch(typeof t){case"object":if(!t)return"null";var r,n;if(t instanceof Array){for(r="[",n=0;n<t.length;n++)r+=(0<n?",":"")+e(t[n]);return r+"]"}if(t instanceof Date)return t.getTime().toString();r="{";var o=0;for(var i in t)if("function"!=typeof t[i]){var a=e(t[i]);r+=(0<o?",":"")+e(i)+":"+a,o++}return r+"}";case"string":return'"'+t.replace(/([\"\\])/g,"\\$1").replace(/\n/g,"\\n")+'"';case"number":return t.toString();case"boolean":return t?"true":"false";case"function":return e(t.toString());case"undefined":default:return'"undefined"'}}(e)}catch(e){}return t}function ce(e){var t=String.prototype.trim;return(t?function(e){return null===e?"":t.call(e)}:function(e){return null===e?"":e.toString().replace(/^\s+/,"").replace(/\s+$/,"")})(e)}function ue(e,t,r,n){}function de(e){return"function"==typeof e}function fe(e){return ie(e)}function pe(e,t,r){ie(e,t,r)}function le(e){for(var t in e)return!1;return!0}function me(e){var t=e;try{t=encodeURIComponent?encodeURIComponent(e):e}catch(e){}return t}function he(e){var t=e;try{t=decodeURIComponent?decodeURIComponent(e):e}catch(e){}return t}function ve(){return(new Date).getTime()}function ye(e,t){if((e=e||[])&&0<e.length)for(var r=0;r<e.length;r++)e[r]&&t(e[r],r,e)}function ge(){for(var e=[],t=0,r=arguments.length;t<r;t++)e.push(arguments[t]);return e}function we(e,t,r,n,o){if(!e)return!1;if(de(r)&&(n=r,r=null),t=function(e){if(!_snBusError.CryptoJS)return e;var t=_snBusError.CryptoJS.enc.Utf8.parse("e12fa5e4af95aeaf31cafb60ea933348"),r=_snBusError.CryptoJS.enc.Utf8.parse("0392039203920300");return _snBusError.CryptoJS.AES.encrypt(e,t,{iv:r,mode:_snBusError.CryptoJS.mode.CBC}).toString()}(t)||"",n=de(n)?n:ue,window.navigator&&window.navigator.sendBeacon&&/^http/i.test(e)&&!o){var i=window.navigator.sendBeacon(e,t);n(!i)}else{var a;if(window.XDomainRequest)(a=new XDomainRequest).open("POST",e),a.onload=function(){n(null,a.responseText)},Te(a,"load",function(){n(null,a.responseText)}),Te(a,"error",function(){n("post("+e+") error")}),Se(!0,a,"onerror",function(e){return function(){n("post error",a.responseText),de(e)&&e.apply(this,arguments)}}),a.send(t);else if(window.XMLHttpRequest){(a=new window.XMLHttpRequest).overrideMimeType&&a.overrideMimeType("text/html");try{a._wrap=1}catch(e){}a.onreadystatechange=function(e){4==a.readyState&&200==a.status&&n(null,a.responseText)},a.onerror&&Se(!0,a,"onerror",function(e){return function(){n("post err",a.responseText),de(e)&&e.apply(this,arguments)}});try{a.open("POST",e,!0)}catch(e){}for(var s in r)a.setRequestHeader(s,r[s]);a.send(t)}else n(!1)}}function Se(t,e,r,n,o){var i;try{i=e[r]}catch(e){if(!t)return!1}if(!i&&!t)return!1;if(i&&i._wrap)return!1;try{e[r]=n(i,o)}catch(e){return!1}return e[r]._wrap=[i],!0}function Ee(s){ye(["setTimeout","setInterval"],function(e){Se(!0,window,e,function(a){return function(){var e,t,r,n,o=ge.apply(this,arguments),i=o[0];de(i)&&(t=i,r=s,n=!0,e=function(){try{N=r,n&&Ee(r),t.apply(this,arguments),n&&_e()}catch(e){n&&_e()}}),e&&(o[0]=e),a.apply?a.apply(this,o):Function.prototype.apply.apply(a,[a,o])}})})}function _e(){ye(["setTimeout","setInterval"],function(e){!function(e,t){try{var r=e[t]._wrap;r&&(e[t]=r[0],e[t]._wrap=null,delete e[t]._wrap)}catch(e){}}(window,e)})}function Te(e,t,r,n){if(!e||!t)return!1;if(r=de(r)?r:ue,n="boolean"==typeof n&&n,e.addEventListener)try{e.addEventListener(t,r,n)}catch(e){}else if(e.attachEvent)try{e.attachEvent("on"+t,r)}catch(e){}else e["on"+t]=r}var xe=function(){function e(e){return e<0?NaN:e<=30?0|Math.random()*(1<<e):e<=53?(0|Math.random()*(1<<30))+(0|Math.random()*(1<<e-30))*(1<<30):NaN}function t(e,t){for(var r=e.toString(16),n=t-r.length,o="0";0<n;n>>>=1,o+=o)1&n&&(r=o+r);return r}return function(){return t(e(32),8)+"-"+t(e(16),4)+"-"+t(16384|e(12),4)+"-"+t(32768|e(14),4)+"-"+t(e(48),12)}}();function Be(e,t){return function(){return e.apply(t,arguments)}}function ke(e,t,r){oe?(Be(localStorage.setItem,localStorage),localStorage.setItem(e,t)):pe(e,t,{expires:r})}function Ce(e){return oe?(Be(localStorage.getItem,localStorage),localStorage.getItem(e)):fe(e)}function be(e,t){var r=(/^https/i.test(document.URL)?"https":"http")+"://"+e;return t&&(r+=t),r}function Ie(e){return"string"==typeof e?e.length:window.ArrayBuffer&&e instanceof ArrayBuffer?e.byteLength:window.Blob&&e instanceof Blob?e.size:e&&e.length?e.length:0}function Le(e,t){return(String.prototype.startsWith?function(e,t){return e.startsWith(t)}:function(e,t){return e.slice(0,t.length)===t})(e,t)}function Pe(){var e={},r=j;if(g&&g.timing){var t=g.timing;function n(e){return t[e]}function o(e){var t=0;return e&&(t=e-r),t<0&&(t=0),t}r=t.navigationStart;var i,a=o(G.domainLookupStart),s=o(G.domainLookupEnd),c=o(n(G.redirectStart)),u=o(n(G.redirectEnd)),d=o(n(G.connectStart)),f=o(n(G.connectEnd));if(e={fetchStartTime:o(n(G.fetchStart)),requestStartTime:o(n(G.requestStart)),responseStartTime:o(n(G.responseStart)),responseEndTime:o(n(G.responseEnd)),domContentLoadedEventStartTime:o(n(G.domContentLoadedEventStart)),domContentLoadedEventEndTime:o(n(G.domContentLoadedEventEnd)),domInteractiveTime:o(n(G.domInteractive)),domCompleteTime:o(n(G.domComplete)),loadEventStartTime:o(n(G.loadEventStart)),loadEventEndTime:o(n(G.loadEventEnd)),unloadEventStartTime:o(n(G.unloadEventStart)),unloadEventEndTime:o(n(G.unloadEventEnd))},0<=f-d&&(e.connectStartTime=d,e.connectEndTime=f),0<=s-a&&(e.domainLookupStartTime=a,e.domainLookupEndTime=s),0<=u-c&&(e.redirectEndTime=u,e.redirectStartTime=c),t.msFirstPaint&&(i=t.msFirstPaint),window.chrome&&window.chrome.loadTimes){var p=window.chrome.loadTimes();p&&p.firstPaintTime&&(i=1e3*p.firstPaintTime)}i||(i=function(){var n=0;if(g){var e=g.timing;if(g.getEntriesByName){n=e.domLoading;var o=e.navigationStart;ye(F,function(e){var t=g.getEntriesByName(e);if(1==t.length){var r=t[0].responseEnd+o;n<r&&(n=r)}})}}return Math.round(n)}()),i&&(e.firstPaintTime=Math.round(o(i))),L&&(e.firstTouchTime=Math.round(o(L))),t.secureConnectionStart&&(e.secureConnectionStartTime=o(n(G.secureConnectionStart)))}else e={domContentLoadedEventStartTime:P-r,loadEventStartTime:k-r,loadEventEndTime:k-r};return e}function Me(){L||(L=ve())}function Re(){var e,t,r=Ke.version,n=Ke.key,o=me(document.URL),i=ve(),a=Z,s=me(Ce(T)),c=me(fe(_)),u=me(document.title),d=document.characterSet,f=function(){var e=Ce(E)||"";try{e&&(e=ae(e))}catch(e){}return e}()||{};return{v:r,k:n,cref:o,r:i,p:a,d:s,s:c,tit:u,c:d,pref:he(f.pageRef),firstd:f.isFirstDay,firstt:f.isFirstTime,lg:f.browserLanguage,sw:f.screenWidth,sh:f.screenHeight,ua:me(w),pro:O.p||"",city:O.c||"",dist:O.d||"",userId:(e=fe("_snma")||"",t=(""+(e=he(e)||"")).split("|")||[],fe(B)||t[1]||""),resourceType:(document.getElementById("resourceType")||{value:"web"}).value,pageName:(document.getElementById("pagename")||{value:""}).value,exclusive:function(e){try{return window.btoa(e)}catch(e){return""}}(se(Y))}}function ze(){return Math.floor(100*Math.random()+1)}var Ae=!1;function De(){Ae||Oe(),R&&(clearInterval(R),R=null),A&&(clearInterval(A),A=null),Ae=!0}function qe(){Ae=!1,k||(k=ve(),je(),function(i){if(i=de(i)?i:ue,le(O)){var e=Ce(x);e?(e=ae(e),72e5<ve()-e.t?t():(O=e,i(null))):t()}else i(null);function t(){var e="snpfjsonp1",r=null,t=document.createElement("script"),n=document.getElementsByTagName("head")[0]||document.documentElement;function o(){try{t.clearAttributes&&t.clearAttributes(),t.onload=t.onreadystatechange=t.onerror=null,t.parentNode&&t.parentNode.removeChild(t),t=null,delete window[e]}catch(e){}}Te(t,"error",function(){window.clearTimeout(r),i("error"),o()}),t.src=be(V)+"?callback="+e+"&_="+ve(),t.async=!0,window[e]=function(e){e=e||{},window.clearTimeout(r);var t={p:me(e.provinceName),c:me(e.cityName),d:me(e.districtName),t:ve()};ke(x,se(O=t)),i(null),o()},r=window.setTimeout(function(){i("timeout")},1e3),n.insertBefore(t,n.firstChild)}}(function(){setTimeout(function(){Oe()},0)}))}function Ne(e){if(ze()<=Ke.jsErrorP){var t=function(e){var t=arguments,r=t.length,n={time:ve(),lineno:0,colno:0,message:"",messageStack:"",fileName:""};if(0<r){var o=t[0];"string"==typeof o?(n.message=t[0],n.fileName=t[1],n.lineno=t[2],n.colno=t[3],n.messageStack=t[4]):(o instanceof Error||window.ErrorEvent&&o instanceof window.ErrorEvent)&&(o.message&&(n.message=o.message),o.error&&(n.message=o.error.constructor.name+(o.error.message||""),n.messageStack=o.error.stack||""),n.lineno=o.lineno||0,n.colno=o.colno||0,o.filename?n.fileName=o.filename:o.error?n.fileName=o.error.fileName||"":o.target&&(n.fileName=o.target.baseURI||""))}return n}.apply(this,arguments);t.fileName&&C.push(t)}}function je(){if(!P){if(P=ve(),document.querySelectorAll)ye(document.querySelectorAll("head>link,head>script")||[],function(e){var t="";"LINK"==e.tagName?t=e.href:"SCRIPT"!=e.tagName||e.defer||e.async||(t=e.src),t&&F.push(t)});R=setInterval(function(){!function(e){if((P||e)&&(e||(e=!M||(1e4<ve()-M||10<=b.length)),0<b.length&&e)){var t=function(){for(var e={common:Re(),xhr:[]},t=[],r=[],n=0,o=b.length;n<o;n++){var i=b[n],a={id:i.id,start:i.start,err:i.errorReason,m:i.method,reql:i.requestLength||0,resl:i.responseLength||0,s:i.status,diff:i.timeDiff,tid:i.traceId,u:he(i.url),at:i.cbTime};a.diff>Ke.slowAjaxT&&ze()<=Ke.slowAjaxP?t.push(a):(a.err||200!=a.s&&0!=a.s)&&ze()<=Ke.ajaxErrorP&&t.push(a),r.push(a)}0<t.length?ze()<=Ke.ajaxP?e.xhr=r:e.xhr=t:ze()<=Ke.ajaxP&&(e.xhr=r);return e}();0<t.xhr.length&&(W=!0,we(be(H,$),se(t))),M=ve(),b=[]}}()},z)}}function Oe(){if(q)return!1;if(!k)return!1;try{var o=Pe();if(!le(g)){var i=function(e){var t,r=[];if(g){g.getEntriesByType&&(t=g.getEntriesByType("resource")),g.getEntries&&(t=g.getEntries()),t&&(I=I.concat(t)),g.webkitClearResourceTimings&&g.webkitClearResourceTimings(),g.clearResourceTimings&&g.clearResourceTimings();for(var n=0,o=I.length;n<o;n++){var i=I[n],a={startTime:i.startTime||0,initiatorType:i.initiatorType,name:me(i.name),fetchStartTime:i.fetchStart||0,domainLookupStartTime:i.domainLookupStart||0,domainLookupEndTime:i.domainLookupEnd||0,connectStartTime:i.connectStart||0,connectEndTime:i.connectEnd||0,secureConnectionStartTime:i.secureConnectionStart||0,requestStartTime:i.requestStart||0,responseStartTime:i.responseStart||0,responseEndTime:i.responseEnd||0,encodedBodySize:i.encodedBodySize||0,transferSize:i.transferSize||0};a.responseEndTime-a.startTime>Ke.slowResourceT?ze()<=Ke.slowResourceP&&r.push(a):e>Ke.slowPageT&&ze()<=Ke.slowP&&r.push(a)}}return r}(0<o.loadEventStartTime?o.loadEventStartTime:k-j);function e(){var e,t,r=(e=o,t=Re(),e=e||{},t.r=U,{common:t,page:{dc:e.domCompleteTime||0,di:e.domInteractiveTime||0,dclee:e.domContentLoadedEventEndTime||0,dcles:e.domContentLoadedEventStartTime||0,fs:e.fetchStartTime||0,led:e.loadEventEndTime||0,les:e.loadEventStartTime||0,reqs:e.requestStartTime||0,rsps:e.responseStartTime||0,rspe:e.responseEndTime||0,uee:e.unloadEventEndTime||0,ues:e.unloadEventStartTime||0,fp:e.firstPaintTime||0,dls:e.domainLookupStartTime||0,dle:e.domainLookupEndTime||0,ft:e.firstTouchTime||0,scs:e.secureConnectionStartTime||0,cs:e.connectStartTime||0,ce:e.connectEndTime||0,rde:e.redirectEndTime||0,rds:e.redirectStartTime||0}}),n=function(e){for(var t=[],r={common:Re(),resources:[]},n=0,o=(e=e||[]).length;n<o;n++){var i=e[n],a={n:i.name,type:i.initiatorType,start:Math.round(i.startTime),ce:Math.round(i.connectEndTime),cs:Math.round(i.connectStartTime),dls:Math.round(i.domainLookupStartTime),dle:Math.round(i.domainLookupEndTime),fs:Math.round(i.fetchStartTime),reqs:Math.round(i.requestStartTime),rspe:Math.round(i.responseEndTime),rsps:Math.round(i.responseStartTime),scs:Math.round(i.secureConnectionStartTime),bs:i.encodedBodySize,ts:i.transferSize,s:"200"};t.push(a)}return 0<t.length&&(r.resources=t),r}(i);we(be(H,K),se(r)),0<n.resources.length&&window.setTimeout(function(){we(be(H,X),se(n))},100),q=!0}0==i.length?0<C.length?e():(ze()<=Ke.normalP||W)&&e():e(),Fe(!0),A=setInterval(function(){Fe()},D)}}catch(e){}}function Fe(e){if(0<C.length||e){W=!0;var t=function(){var e=Re();e.r=U;for(var t={common:e,errors:[]},r=0,n=C.length;r<n;r++){var o=C[r],i={time:o.time,cno:o.colno,lno:o.lineno,name:o.fileName,msg:o.message,msgStack:o.messageStack};t.errors.push(i)}return t}();we(be(H,Q),se(t)),C=[]}}function Je(e){e=e||{};var t=fe("_snmb")||"",r=(""+(t=he(t)||"")).split("|")||[];var n=function(e){var t="";for(var r in e)"string"==typeof e[r]&&(t+=(t?"&":"")+r+"="+me(e[r]));return t}({ct:ve(),pvid:fe("_snmp")||"",sid:r[0]||"",i:String(Math.random()).substring(2,11),url:me(document.location.href),v:Ke.version,vid:r[1]||"",bizid:e.bid||"",errcode:e.error_code||"",errdetail:me(e.error_detail||""),errtype:e.error_type||"",mbrid:e.member_id||"",mbrlevel:e.member_level||"",region:e.region||"",typname:e.type_name||""});we(be(H,"/dc-web/excp.gif"),n,{"content-type":"application/x-www-form-urlencoded"},null,!0)}function Ue(){var e=window.XMLHttpRequest;e.prototype&&(Se(!1,e.prototype,"open",function(t){return function(){if(!this._wrap){var e=ge.apply(this,arguments);this._openWrap={method:e[0],url:e[1],start:ve()}}try{return t.apply(this,arguments)}catch(e){return Function.prototype.apply.call(t,this,arguments)}}}),Se(!1,e.prototype,"send",function(t){return function(){var n=this,o=0;function r(e){if(4==n.readyState){var t=n._openWrap;if(t){if(4===n.readyState)t.end=ve(),t.status=n.status,""!=n.responseType&&"text"!=n.responseType||(t.responseLength=Ie(n.responseText));else if(n.response)t.responseLength=Ie(n.response);else try{t.responseLength=Ie(n.responseText)}catch(e){t.responseLength=0}t.readyState=n.readyState;var r={method:(""+t.method).toUpperCase(),url:function(e){e+="";var t="",r=/^https/i.test(document.URL)?"https":"http",n=document.location.host;if(Le(e,"http"))return e;t=Le(e,"//")?r+":"+e:Le(e,"/")?r+"://"+n+e:Le(e,"../")?r+"://"+n+e.replace("../","/"):r+"://"+n+"/"+e;return t}(t.url),timeDiff:0<t.status?t.end-t.start:0,status:t.status,responseLength:t.responseLength,requestLength:t.requestLength,errorReason:0==t.status?e||"error":"",traceId:t.tradeId||"",cbTime:o,id:J++,start:t.start};b.push(r),n._openWrap=null}}}function e(t){return function(){var e;4==n.readyState&&n._openWrap&&(e=ve(),n._openWrap.readyState=4,n._openWrap.end=e);try{N&&Ee(N),t.apply(this,arguments),N&&_e(),N=null}catch(e){N&&_e(),N=null}4==n.readyState&&(o=ve()-e),r()}}this._wrap||(this._openWrap.start=ve(),this._openWrap.requestLength=arguments[0]?Ie(arguments[0]):0,Se(!1,this,"onreadystatechange",e)||setTimeout(function(){Se(!1,n,"onreadystatechange",e)},0),Te(this,"error",function(){n._openWrap&&r("error")}),Te(this,"abort",function(){n._openWrap&&r("abort")}),Te(this,"loadstart",function(){n._openWrap&&(n._openWrap.start=ve())}),Te(this,"timeout",function(){n._openWrap&&r("timeout")}));try{return t.apply(this,arguments)}catch(e){return Function.prototype.apply.call(t,this,arguments)}}}))}function We(){function e(){var t=window.onerror;window.onerror=function(e){Ne.apply(this,arguments),de(t)&&t.apply(this,arguments)},window.onerror._sn=!0}Te(window,"load",function(){qe(),S&&window.setTimeout(function(){window.onerror&&!window.onerror._sn&&e()},0)}),Te(window,"beforeunload",function(){De()}),Te(window,"pagehide",function(){De()}),Te(window,"unload",function(){De()}),S?e():window.addEventListener&&Te(window,"error",Ne),Te(document,"scroll",function(){Me()}),Te(document,"keypress",function(){Me()}),Te(document,"click",function(){Me()}),Te(document,"DOMContentLoaded",function(){je()}),Te(document,"readystatechange",function(){"complete"===document.readyState&&je()}),Te(window,"pushState",function(){q=!1,ee(),Oe()},!1),g&&(Te(g,"resourcetimingbufferfull",function(){if(g.getEntriesByType){var e=g.getEntriesByType("resource");e&&(I=I.concat(e)),g.clearResourceTimings()}}),Te(g,"webkitresourcetimingbufferfull",function(){if(g.getEntriesByType){var e=g.getEntriesByType("resource");e&&(I=I.concat(e)),g.webkitClearResourceTimings()}}))}function He(){var e,t;ee(),function(){var e=Ce(E)||"";e=ae(e);var t,r,n="isFirstDay",o="isFirstTime",i="firstDay";r=(t=(t=e)||{})[i],t[o]=r?(r=parseInt(r,10),new Date(r).toDateString()===(new Date).toDateString()?t[n]=!0:t[n]=!1,!1):(t[i]=ve(),t[n]=!0),(e=t).pageRef=document.referrer||"",e.browserLanguage=navigator.language||navigator.browserLanguage,e.screenHeight=window.screen&&window.screen.height,e.screenWidth=window.screen&&window.screen.width,ke(E,se(e),30)}(),e=Ce(T),t=fe(_),e||(e=xe(),ke(T,e)),t||(t=xe(),pe(_,t)),Ue(),We()}var Ke={version:"0.0.1",url:"",err_url:"",slowPageT:7e3,slowResourceT:4e3,slowAjaxT:5e3,normalP:50,slowP:100,slowResourceP:100,ajaxP:50,slowAjaxP:100,jsErrorP:100,ajaxErrorP:100},Xe={key:"5f05acfc9a084d9f9a07e165a2516c18",version:"V0.1.3",slowPageT:parseInt("10000",10)||7e3,slowResourceT:parseInt("4000",10)||4e3,slowAjaxT:parseInt("1200",10)||5e3,normalP:parseInt("50",10)||50,slowP:parseInt("100",10)||100,slowResourceP:parseInt("100",10)||100,ajaxP:parseInt("50",10)||50,slowAjaxP:parseInt("100",10)||100,jsErrorP:parseInt("100",10)||100,ajaxErrorP:parseInt("100",10)||100};function $e(){for(var e in Xe){var t=Xe[e];t&&-1==(t+"").indexOf("##")&&(Ke[e]=t)}}window._snBusError=window._snBusError||{},window._snBusError.bizExcp=Je,window._snBusError.decrypt=function(e){console.log(_snBusError.CryptoJS.AES.decrypt(e,_snBusError.CryptoJS.enc.Utf8.parse("e12fa5e4af95aeaf31cafb60ea933348"),{iv:_snBusError.CryptoJS.enc.Utf8.parse("0392039203920300"),mode:_snBusError.CryptoJS.mode.CBC}).toString(_snBusError.CryptoJS.enc.Utf8).toString())},window.sa=window.sa||{},window.sa.initTrackerConfig=window.sa.initTrackerConfig||function(){},window.sa.openAPI=window.sa.openAPI||{sendMsgV2:Je},window._snBusError.refreshAppExclusiveInfo=function(e,t,r,n,o,i,a,s,c,u){function d(e){return(e||"").substring(0,50)}Y={xclsv0:d(e),xclsv1:d(t),xclsv2:d(r),xclsv3:d(n),xclsv4:d(o),xclsv5:d(i),xclsv6:d(a),xclsv7:d(s),xclsv8:d(c),xclsv9:d(u)}},window._snBusError.bpmProbeInit=function(e){H=(Xe=e).url,$e(),He()},$e(),Ke.key&&He()}(window,window.document);